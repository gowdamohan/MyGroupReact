{"ast":null,"code":"import React,{useState,useEffect}from'react';import{Container,Typography,Grid,Card,CardContent,CardActions,Button,Box,TextField,InputAdornment,Pagination,CircularProgress,Alert}from'@mui/material';import{Search,Add,Group as GroupIcon}from'@mui/icons-material';import{Link}from'react-router-dom';import{useQuery}from'@tanstack/react-query';import{groupsAPI}from'../services/api';import{jsx as _jsx,jsxs as _jsxs,Fragment as _Fragment}from\"react/jsx-runtime\";const Groups=()=>{const[page,setPage]=useState(1);const[search,setSearch]=useState('');const[debouncedSearch,setDebouncedSearch]=useState('');// Debounce search\nuseEffect(()=>{const timer=setTimeout(()=>{setDebouncedSearch(search);setPage(1);// Reset to first page when searching\n},500);return()=>clearTimeout(timer);},[search]);const{data:groupsData,isLoading,error}=useQuery({queryKey:['groups',page,debouncedSearch],queryFn:()=>groupsAPI.getAllGroups(page,12,debouncedSearch)});const handlePageChange=(event,value)=>{setPage(value);};const handleSearchChange=event=>{setSearch(event.target.value);};if(error){return/*#__PURE__*/_jsx(Container,{maxWidth:\"lg\",children:/*#__PURE__*/_jsx(Alert,{severity:\"error\",sx:{mt:4},children:\"Failed to load groups. Please try again later.\"})});}return/*#__PURE__*/_jsx(Container,{maxWidth:\"lg\",children:/*#__PURE__*/_jsxs(Box,{sx:{mt:4,mb:4},children:[/*#__PURE__*/_jsxs(Box,{display:\"flex\",justifyContent:\"space-between\",alignItems:\"center\",mb:4,children:[/*#__PURE__*/_jsx(Typography,{variant:\"h4\",component:\"h1\",children:\"Groups\"}),/*#__PURE__*/_jsx(Button,{variant:\"contained\",startIcon:/*#__PURE__*/_jsx(Add,{}),component:Link,to:\"/groups/create\",children:\"Create Group\"})]}),/*#__PURE__*/_jsx(Box,{mb:4,children:/*#__PURE__*/_jsx(TextField,{fullWidth:true,placeholder:\"Search groups...\",value:search,onChange:handleSearchChange,InputProps:{startAdornment:/*#__PURE__*/_jsx(InputAdornment,{position:\"start\",children:/*#__PURE__*/_jsx(Search,{})})}})}),isLoading&&/*#__PURE__*/_jsx(Box,{display:\"flex\",justifyContent:\"center\",py:4,children:/*#__PURE__*/_jsx(CircularProgress,{})}),groupsData&&/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(Grid,{container:true,spacing:3,children:groupsData.data.map(group=>/*#__PURE__*/_jsx(Grid,{item:true,xs:12,sm:6,md:4,children:/*#__PURE__*/_jsxs(Card,{sx:{height:'100%',display:'flex',flexDirection:'column'},children:[/*#__PURE__*/_jsxs(CardContent,{sx:{flexGrow:1},children:[/*#__PURE__*/_jsxs(Box,{display:\"flex\",alignItems:\"center\",gap:1,mb:2,children:[/*#__PURE__*/_jsx(GroupIcon,{color:\"primary\"}),/*#__PURE__*/_jsx(Typography,{variant:\"h6\",component:\"h3\",noWrap:true,children:group.name})]}),/*#__PURE__*/_jsx(Typography,{variant:\"body2\",color:\"text.secondary\",sx:{display:'-webkit-box',WebkitLineClamp:3,WebkitBoxOrient:'vertical',overflow:'hidden',mb:2},children:group.description||'No description available.'})]}),/*#__PURE__*/_jsx(CardActions,{children:/*#__PURE__*/_jsx(Button,{size:\"small\",component:Link,to:\"/groups/\".concat(group.id),children:\"View Details\"})})]})},group.id))}),groupsData.data.length===0&&/*#__PURE__*/_jsxs(Box,{textAlign:\"center\",py:4,children:[/*#__PURE__*/_jsx(Typography,{variant:\"h6\",color:\"text.secondary\",children:debouncedSearch?'No groups found matching your search.':'No groups available yet.'}),/*#__PURE__*/_jsx(Button,{variant:\"contained\",startIcon:/*#__PURE__*/_jsx(Add,{}),component:Link,to:\"/groups/create\",sx:{mt:2},children:\"Be the first to create a group\"})]}),groupsData.totalPages>1&&/*#__PURE__*/_jsx(Box,{display:\"flex\",justifyContent:\"center\",mt:4,children:/*#__PURE__*/_jsx(Pagination,{count:groupsData.totalPages,page:page,onChange:handlePageChange,color:\"primary\"})})]})]})});};export default Groups;","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}