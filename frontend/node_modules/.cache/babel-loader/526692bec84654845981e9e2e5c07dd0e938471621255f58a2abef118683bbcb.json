{"ast":null,"code":"import _objectSpread from\"D:/MyGroupReact/frontend/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import _objectWithoutProperties from\"D:/MyGroupReact/frontend/node_modules/@babel/runtime/helpers/esm/objectWithoutProperties.js\";const _excluded=[\"children\",\"value\",\"index\"];import React,{useState,useEffect}from'react';import{Container,Typography,Grid,Card,CardContent,CardHeader,Button,Box,Table,TableBody,TableCell,TableContainer,TableHead,TableRow,Paper,Chip,IconButton,Menu,MenuItem,Dialog,DialogTitle,DialogContent,DialogActions,TextField,FormControl,InputLabel,Select,Tab,Tabs,Avatar,LinearProgress}from'@mui/material';import{People as PeopleIcon,Group as GroupIcon,Analytics as AnalyticsIcon,Settings as SettingsIcon,MoreVert as MoreVertIcon,Add as AddIcon,Edit as EditIcon,Delete as DeleteIcon,Block as BlockIcon,CheckCircle as CheckCircleIcon,Warning as WarningIcon}from'@mui/icons-material';import{useAuth}from'../contexts/AuthContext';import api from'../services/api';import{jsx as _jsx,Fragment as _Fragment,jsxs as _jsxs}from\"react/jsx-runtime\";function TabPanel(props){const{children,value,index}=props,other=_objectWithoutProperties(props,_excluded);return/*#__PURE__*/_jsx(\"div\",_objectSpread(_objectSpread({role:\"tabpanel\",hidden:value!==index,id:\"admin-tabpanel-\".concat(index),\"aria-labelledby\":\"admin-tab-\".concat(index)},other),{},{children:value===index&&/*#__PURE__*/_jsx(Box,{sx:{p:0},children:children})}));}const Admin=()=>{const{user}=useAuth();const[tabValue,setTabValue]=useState(0);const[stats,setStats]=useState({totalUsers:0,activeUsers:0,totalGroups:0,pendingApprovals:0,totalRevenue:0,monthlyGrowth:0});const[users,setUsers]=useState([]);const[loading,setLoading]=useState(true);const[anchorEl,setAnchorEl]=useState(null);const[selectedUser,setSelectedUser]=useState(null);const[editDialogOpen,setEditDialogOpen]=useState(false);useEffect(()=>{fetchAdminStats();fetchUsers();},[]);const fetchAdminStats=async()=>{try{const response=await api.get('/admin/stats');setStats(response.data);}catch(error){console.error('Failed to fetch admin stats:',error);}};const fetchUsers=async()=>{try{const response=await api.get('/admin/users');setUsers(response.data);}catch(error){console.error('Failed to fetch users:',error);}finally{setLoading(false);}};const handleTabChange=(event,newValue)=>{setTabValue(newValue);};const handleMenuClick=(event,user)=>{setAnchorEl(event.currentTarget);setSelectedUser(user);};const handleMenuClose=()=>{setAnchorEl(null);setSelectedUser(null);};const handleUserAction=async(action,userId)=>{try{await api.post(\"/admin/users/\".concat(userId,\"/\").concat(action));fetchUsers();// Refresh users list\nhandleMenuClose();}catch(error){console.error(\"Failed to \".concat(action,\" user:\"),error);}};const getStatusColor=status=>{switch(status){case'active':return'success';case'inactive':return'default';case'pending':return'warning';case'blocked':return'error';default:return'default';}};const getStatusIcon=status=>{switch(status){case'active':return/*#__PURE__*/_jsx(CheckCircleIcon,{fontSize:\"small\"});case'pending':return/*#__PURE__*/_jsx(WarningIcon,{fontSize:\"small\"});case'blocked':return/*#__PURE__*/_jsx(BlockIcon,{fontSize:\"small\"});default:return/*#__PURE__*/_jsx(_Fragment,{});}};// Check if user has admin permissions\nif((user===null||user===void 0?void 0:user.role)!=='admin'){return/*#__PURE__*/_jsxs(Container,{maxWidth:\"lg\",sx:{mt:4,mb:4},children:[/*#__PURE__*/_jsx(Typography,{variant:\"h4\",color:\"error\",textAlign:\"center\",children:\"Access Denied\"}),/*#__PURE__*/_jsx(Typography,{variant:\"body1\",textAlign:\"center\",sx:{mt:2},children:\"You don't have permission to access this page.\"})]});}return/*#__PURE__*/_jsxs(Container,{maxWidth:\"lg\",sx:{mt:4,mb:4},children:[/*#__PURE__*/_jsx(Typography,{variant:\"h4\",component:\"h1\",fontWeight:\"bold\",gutterBottom:true,children:\"Admin Dashboard\"}),/*#__PURE__*/_jsxs(Grid,{container:true,spacing:3,sx:{mb:4},children:[/*#__PURE__*/_jsx(Grid,{item:true,xs:12,sm:6,md:3,children:/*#__PURE__*/_jsx(Card,{children:/*#__PURE__*/_jsx(CardContent,{children:/*#__PURE__*/_jsxs(Box,{display:\"flex\",alignItems:\"center\",justifyContent:\"space-between\",children:[/*#__PURE__*/_jsxs(Box,{children:[/*#__PURE__*/_jsx(Typography,{color:\"textSecondary\",gutterBottom:true,children:\"Total Users\"}),/*#__PURE__*/_jsx(Typography,{variant:\"h4\",component:\"div\",children:stats.totalUsers.toLocaleString()})]}),/*#__PURE__*/_jsx(PeopleIcon,{color:\"primary\",sx:{fontSize:40}})]})})})}),/*#__PURE__*/_jsx(Grid,{item:true,xs:12,sm:6,md:3,children:/*#__PURE__*/_jsx(Card,{children:/*#__PURE__*/_jsx(CardContent,{children:/*#__PURE__*/_jsxs(Box,{display:\"flex\",alignItems:\"center\",justifyContent:\"space-between\",children:[/*#__PURE__*/_jsxs(Box,{children:[/*#__PURE__*/_jsx(Typography,{color:\"textSecondary\",gutterBottom:true,children:\"Active Users\"}),/*#__PURE__*/_jsx(Typography,{variant:\"h4\",component:\"div\",children:stats.activeUsers.toLocaleString()})]}),/*#__PURE__*/_jsx(CheckCircleIcon,{color:\"success\",sx:{fontSize:40}})]})})})}),/*#__PURE__*/_jsx(Grid,{item:true,xs:12,sm:6,md:3,children:/*#__PURE__*/_jsx(Card,{children:/*#__PURE__*/_jsx(CardContent,{children:/*#__PURE__*/_jsxs(Box,{display:\"flex\",alignItems:\"center\",justifyContent:\"space-between\",children:[/*#__PURE__*/_jsxs(Box,{children:[/*#__PURE__*/_jsx(Typography,{color:\"textSecondary\",gutterBottom:true,children:\"Total Groups\"}),/*#__PURE__*/_jsx(Typography,{variant:\"h4\",component:\"div\",children:stats.totalGroups.toLocaleString()})]}),/*#__PURE__*/_jsx(GroupIcon,{color:\"info\",sx:{fontSize:40}})]})})})}),/*#__PURE__*/_jsx(Grid,{item:true,xs:12,sm:6,md:3,children:/*#__PURE__*/_jsx(Card,{children:/*#__PURE__*/_jsx(CardContent,{children:/*#__PURE__*/_jsxs(Box,{display:\"flex\",alignItems:\"center\",justifyContent:\"space-between\",children:[/*#__PURE__*/_jsxs(Box,{children:[/*#__PURE__*/_jsx(Typography,{color:\"textSecondary\",gutterBottom:true,children:\"Pending Approvals\"}),/*#__PURE__*/_jsx(Typography,{variant:\"h4\",component:\"div\",children:stats.pendingApprovals})]}),/*#__PURE__*/_jsx(WarningIcon,{color:\"warning\",sx:{fontSize:40}})]})})})})]}),/*#__PURE__*/_jsx(Paper,{sx:{width:'100%',mb:3},children:/*#__PURE__*/_jsxs(Tabs,{value:tabValue,onChange:handleTabChange,\"aria-label\":\"admin tabs\",children:[/*#__PURE__*/_jsx(Tab,{label:\"Users\",icon:/*#__PURE__*/_jsx(PeopleIcon,{})}),/*#__PURE__*/_jsx(Tab,{label:\"Groups\",icon:/*#__PURE__*/_jsx(GroupIcon,{})}),/*#__PURE__*/_jsx(Tab,{label:\"Analytics\",icon:/*#__PURE__*/_jsx(AnalyticsIcon,{})}),/*#__PURE__*/_jsx(Tab,{label:\"Settings\",icon:/*#__PURE__*/_jsx(SettingsIcon,{})})]})}),/*#__PURE__*/_jsx(TabPanel,{value:tabValue,index:0,children:/*#__PURE__*/_jsxs(Card,{children:[/*#__PURE__*/_jsx(CardHeader,{title:\"User Management\",subheader:\"Manage all registered users\",action:/*#__PURE__*/_jsx(Button,{variant:\"contained\",startIcon:/*#__PURE__*/_jsx(AddIcon,{}),children:\"Add User\"})}),/*#__PURE__*/_jsx(CardContent,{children:loading?/*#__PURE__*/_jsx(LinearProgress,{}):/*#__PURE__*/_jsx(TableContainer,{component:Paper,children:/*#__PURE__*/_jsxs(Table,{children:[/*#__PURE__*/_jsx(TableHead,{children:/*#__PURE__*/_jsxs(TableRow,{children:[/*#__PURE__*/_jsx(TableCell,{children:\"User\"}),/*#__PURE__*/_jsx(TableCell,{children:\"Contact\"}),/*#__PURE__*/_jsx(TableCell,{children:\"Group\"}),/*#__PURE__*/_jsx(TableCell,{children:\"Status\"}),/*#__PURE__*/_jsx(TableCell,{children:\"Last Login\"}),/*#__PURE__*/_jsx(TableCell,{children:\"Actions\"})]})}),/*#__PURE__*/_jsx(TableBody,{children:users.map(user=>/*#__PURE__*/_jsxs(TableRow,{children:[/*#__PURE__*/_jsx(TableCell,{children:/*#__PURE__*/_jsxs(Box,{display:\"flex\",alignItems:\"center\",gap:2,children:[/*#__PURE__*/_jsx(Avatar,{children:user.name.charAt(0)}),/*#__PURE__*/_jsxs(Box,{children:[/*#__PURE__*/_jsx(Typography,{variant:\"subtitle2\",children:user.name}),/*#__PURE__*/_jsxs(Typography,{variant:\"caption\",color:\"textSecondary\",children:[\"ID: \",user.id]})]})]})}),/*#__PURE__*/_jsxs(TableCell,{children:[/*#__PURE__*/_jsx(Typography,{variant:\"body2\",children:user.email}),/*#__PURE__*/_jsx(Typography,{variant:\"caption\",color:\"textSecondary\",children:user.phone})]}),/*#__PURE__*/_jsx(TableCell,{children:user.group}),/*#__PURE__*/_jsx(TableCell,{children:(()=>{const iconEl=getStatusIcon(user.status);return/*#__PURE__*/_jsx(Chip,_objectSpread({label:user.status,color:getStatusColor(user.status),size:\"small\"},iconEl?{icon:iconEl}:{}));})()}),/*#__PURE__*/_jsx(TableCell,{children:/*#__PURE__*/_jsx(Typography,{variant:\"body2\",children:new Date(user.lastLogin).toLocaleDateString()})}),/*#__PURE__*/_jsx(TableCell,{children:/*#__PURE__*/_jsx(IconButton,{onClick:e=>handleMenuClick(e,user),children:/*#__PURE__*/_jsx(MoreVertIcon,{})})})]},user.id))})]})})})]})}),/*#__PURE__*/_jsxs(TabPanel,{value:tabValue,index:1,children:[/*#__PURE__*/_jsx(Typography,{variant:\"h6\",gutterBottom:true,children:\"Group Management\"}),/*#__PURE__*/_jsx(Typography,{variant:\"body1\",color:\"textSecondary\",children:\"Group management features will be implemented here.\"})]}),/*#__PURE__*/_jsxs(TabPanel,{value:tabValue,index:2,children:[/*#__PURE__*/_jsx(Typography,{variant:\"h6\",gutterBottom:true,children:\"Analytics & Reports\"}),/*#__PURE__*/_jsx(Typography,{variant:\"body1\",color:\"textSecondary\",children:\"Analytics dashboard with charts and reports will be implemented here.\"})]}),/*#__PURE__*/_jsxs(TabPanel,{value:tabValue,index:3,children:[/*#__PURE__*/_jsx(Typography,{variant:\"h6\",gutterBottom:true,children:\"System Settings\"}),/*#__PURE__*/_jsx(Typography,{variant:\"body1\",color:\"textSecondary\",children:\"System configuration and settings will be implemented here.\"})]}),/*#__PURE__*/_jsxs(Menu,{anchorEl:anchorEl,open:Boolean(anchorEl),onClose:handleMenuClose,children:[/*#__PURE__*/_jsxs(MenuItem,{onClick:()=>setEditDialogOpen(true),children:[/*#__PURE__*/_jsx(EditIcon,{fontSize:\"small\",sx:{mr:1}}),\"Edit User\"]}),/*#__PURE__*/_jsxs(MenuItem,{onClick:()=>selectedUser&&handleUserAction('activate',selectedUser.id),children:[/*#__PURE__*/_jsx(CheckCircleIcon,{fontSize:\"small\",sx:{mr:1}}),\"Activate\"]}),/*#__PURE__*/_jsxs(MenuItem,{onClick:()=>selectedUser&&handleUserAction('block',selectedUser.id),children:[/*#__PURE__*/_jsx(BlockIcon,{fontSize:\"small\",sx:{mr:1}}),\"Block User\"]}),/*#__PURE__*/_jsxs(MenuItem,{onClick:()=>selectedUser&&handleUserAction('delete',selectedUser.id),children:[/*#__PURE__*/_jsx(DeleteIcon,{fontSize:\"small\",sx:{mr:1}}),\"Delete User\"]})]}),/*#__PURE__*/_jsxs(Dialog,{open:editDialogOpen,onClose:()=>setEditDialogOpen(false),maxWidth:\"md\",fullWidth:true,children:[/*#__PURE__*/_jsx(DialogTitle,{children:\"Edit User\"}),/*#__PURE__*/_jsx(DialogContent,{children:/*#__PURE__*/_jsxs(Grid,{container:true,spacing:2,sx:{mt:1},children:[/*#__PURE__*/_jsx(Grid,{item:true,xs:12,sm:6,children:/*#__PURE__*/_jsx(TextField,{fullWidth:true,label:\"Name\",value:(selectedUser===null||selectedUser===void 0?void 0:selectedUser.name)||'',onChange:()=>{}})}),/*#__PURE__*/_jsx(Grid,{item:true,xs:12,sm:6,children:/*#__PURE__*/_jsx(TextField,{fullWidth:true,label:\"Email\",value:(selectedUser===null||selectedUser===void 0?void 0:selectedUser.email)||'',onChange:()=>{}})}),/*#__PURE__*/_jsx(Grid,{item:true,xs:12,sm:6,children:/*#__PURE__*/_jsx(TextField,{fullWidth:true,label:\"Phone\",value:(selectedUser===null||selectedUser===void 0?void 0:selectedUser.phone)||'',onChange:()=>{}})}),/*#__PURE__*/_jsx(Grid,{item:true,xs:12,sm:6,children:/*#__PURE__*/_jsxs(FormControl,{fullWidth:true,children:[/*#__PURE__*/_jsx(InputLabel,{children:\"Status\"}),/*#__PURE__*/_jsxs(Select,{value:(selectedUser===null||selectedUser===void 0?void 0:selectedUser.status)||'',label:\"Status\",onChange:()=>{},children:[/*#__PURE__*/_jsx(MenuItem,{value:\"active\",children:\"Active\"}),/*#__PURE__*/_jsx(MenuItem,{value:\"inactive\",children:\"Inactive\"}),/*#__PURE__*/_jsx(MenuItem,{value:\"pending\",children:\"Pending\"}),/*#__PURE__*/_jsx(MenuItem,{value:\"blocked\",children:\"Blocked\"})]})]})})]})}),/*#__PURE__*/_jsxs(DialogActions,{children:[/*#__PURE__*/_jsx(Button,{onClick:()=>setEditDialogOpen(false),children:\"Cancel\"}),/*#__PURE__*/_jsx(Button,{variant:\"contained\",children:\"Save Changes\"})]})]})]});};export default Admin;","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}