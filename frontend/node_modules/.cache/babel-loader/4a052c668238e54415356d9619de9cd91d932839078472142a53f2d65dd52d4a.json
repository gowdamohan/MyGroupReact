{"ast":null,"code":"import _objectSpread from\"D:/MyGroupReact/frontend/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import React,{useState,useEffect}from'react';import{Container,Typography,Grid,Card,CardContent,CardHeader,Switch,FormControl,FormControlLabel,InputLabel,Select,MenuItem,TextField,Button,Box,Avatar,IconButton,Dialog,DialogTitle,DialogContent,DialogActions,List,ListItem,ListItemText,ListItemSecondaryAction}from'@mui/material';import{Security as SecurityIcon,Notifications as NotificationsIcon,Language as LanguageIcon,Security as PrivacyIcon,AccountCircle as AccountIcon,Edit as EditIcon,Save as SaveIcon,Cancel as CancelIcon}from'@mui/icons-material';import{useAuth}from'../contexts/AuthContext';import api from'../services/api';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const Settings=()=>{var _user$name;const{user}=useAuth();const[settings,setSettings]=useState({notifications:{email:true,sms:false,push:true,marketing:false},privacy:{profileVisible:true,showEmail:false,showPhone:false,allowMessages:true},preferences:{language:'en',theme:'light',timezone:'Asia/Kolkata',currency:'INR'},security:{twoFactorEnabled:false,sessionTimeout:30,loginAlerts:true}});const[passwordDialog,setPasswordDialog]=useState(false);const[passwordData,setPasswordData]=useState({currentPassword:'',newPassword:'',confirmPassword:''});const[loading,setLoading]=useState(false);useEffect(()=>{fetchSettings();},[]);const fetchSettings=async()=>{try{const response=await api.get('/user/settings');setSettings(response.data);}catch(error){console.error('Failed to fetch settings:',error);}};const handleSettingChange=(category,setting,value)=>{setSettings(prev=>_objectSpread(_objectSpread({},prev),{},{[category]:_objectSpread(_objectSpread({},prev[category]),{},{[setting]:value})}));};const handleSaveSettings=async()=>{setLoading(true);try{await api.put('/user/settings',settings);// Show success message\n}catch(error){console.error('Failed to save settings:',error);}finally{setLoading(false);}};const handleChangePassword=async()=>{if(passwordData.newPassword!==passwordData.confirmPassword){// Show error message\nreturn;}try{await api.put('/user/change-password',{currentPassword:passwordData.currentPassword,newPassword:passwordData.newPassword});setPasswordDialog(false);setPasswordData({currentPassword:'',newPassword:'',confirmPassword:''});// Show success message\n}catch(error){console.error('Failed to change password:',error);}};return/*#__PURE__*/_jsxs(Container,{maxWidth:\"lg\",sx:{mt:4,mb:4},children:[/*#__PURE__*/_jsx(Typography,{variant:\"h4\",component:\"h1\",fontWeight:\"bold\",gutterBottom:true,children:\"Settings\"}),/*#__PURE__*/_jsxs(Grid,{container:true,spacing:3,children:[/*#__PURE__*/_jsx(Grid,{item:true,xs:12,md:6,children:/*#__PURE__*/_jsxs(Card,{children:[/*#__PURE__*/_jsx(CardHeader,{avatar:/*#__PURE__*/_jsx(AccountIcon,{}),title:\"Account Settings\",subheader:\"Manage your account information\"}),/*#__PURE__*/_jsxs(CardContent,{children:[/*#__PURE__*/_jsxs(Box,{display:\"flex\",alignItems:\"center\",gap:2,mb:3,children:[/*#__PURE__*/_jsx(Avatar,{src:user===null||user===void 0?void 0:user.avatar,sx:{width:64,height:64},children:user===null||user===void 0?void 0:(_user$name=user.name)===null||_user$name===void 0?void 0:_user$name.charAt(0)}),/*#__PURE__*/_jsxs(Box,{children:[/*#__PURE__*/_jsx(Typography,{variant:\"h6\",children:user===null||user===void 0?void 0:user.name}),/*#__PURE__*/_jsx(Typography,{variant:\"body2\",color:\"textSecondary\",children:user===null||user===void 0?void 0:user.email})]}),/*#__PURE__*/_jsx(IconButton,{children:/*#__PURE__*/_jsx(EditIcon,{})})]}),/*#__PURE__*/_jsx(Button,{variant:\"outlined\",fullWidth:true,onClick:()=>setPasswordDialog(true),sx:{mt:2},children:\"Change Password\"})]})]})}),/*#__PURE__*/_jsx(Grid,{item:true,xs:12,md:6,children:/*#__PURE__*/_jsxs(Card,{children:[/*#__PURE__*/_jsx(CardHeader,{avatar:/*#__PURE__*/_jsx(NotificationsIcon,{}),title:\"Notifications\",subheader:\"Configure notification preferences\"}),/*#__PURE__*/_jsx(CardContent,{children:/*#__PURE__*/_jsxs(List,{children:[/*#__PURE__*/_jsxs(ListItem,{children:[/*#__PURE__*/_jsx(ListItemText,{primary:\"Email Notifications\",secondary:\"Receive updates via email\"}),/*#__PURE__*/_jsx(ListItemSecondaryAction,{children:/*#__PURE__*/_jsx(Switch,{checked:settings.notifications.email,onChange:e=>handleSettingChange('notifications','email',e.target.checked)})})]}),/*#__PURE__*/_jsxs(ListItem,{children:[/*#__PURE__*/_jsx(ListItemText,{primary:\"SMS Notifications\",secondary:\"Receive updates via SMS\"}),/*#__PURE__*/_jsx(ListItemSecondaryAction,{children:/*#__PURE__*/_jsx(Switch,{checked:settings.notifications.sms,onChange:e=>handleSettingChange('notifications','sms',e.target.checked)})})]}),/*#__PURE__*/_jsxs(ListItem,{children:[/*#__PURE__*/_jsx(ListItemText,{primary:\"Push Notifications\",secondary:\"Receive push notifications\"}),/*#__PURE__*/_jsx(ListItemSecondaryAction,{children:/*#__PURE__*/_jsx(Switch,{checked:settings.notifications.push,onChange:e=>handleSettingChange('notifications','push',e.target.checked)})})]}),/*#__PURE__*/_jsxs(ListItem,{children:[/*#__PURE__*/_jsx(ListItemText,{primary:\"Marketing Emails\",secondary:\"Receive promotional content\"}),/*#__PURE__*/_jsx(ListItemSecondaryAction,{children:/*#__PURE__*/_jsx(Switch,{checked:settings.notifications.marketing,onChange:e=>handleSettingChange('notifications','marketing',e.target.checked)})})]})]})})]})}),/*#__PURE__*/_jsx(Grid,{item:true,xs:12,md:6,children:/*#__PURE__*/_jsxs(Card,{children:[/*#__PURE__*/_jsx(CardHeader,{avatar:/*#__PURE__*/_jsx(PrivacyIcon,{}),title:\"Privacy\",subheader:\"Control your privacy settings\"}),/*#__PURE__*/_jsx(CardContent,{children:/*#__PURE__*/_jsxs(List,{children:[/*#__PURE__*/_jsxs(ListItem,{children:[/*#__PURE__*/_jsx(ListItemText,{primary:\"Profile Visibility\",secondary:\"Make your profile visible to others\"}),/*#__PURE__*/_jsx(ListItemSecondaryAction,{children:/*#__PURE__*/_jsx(Switch,{checked:settings.privacy.profileVisible,onChange:e=>handleSettingChange('privacy','profileVisible',e.target.checked)})})]}),/*#__PURE__*/_jsxs(ListItem,{children:[/*#__PURE__*/_jsx(ListItemText,{primary:\"Show Email\",secondary:\"Display email on your profile\"}),/*#__PURE__*/_jsx(ListItemSecondaryAction,{children:/*#__PURE__*/_jsx(Switch,{checked:settings.privacy.showEmail,onChange:e=>handleSettingChange('privacy','showEmail',e.target.checked)})})]}),/*#__PURE__*/_jsxs(ListItem,{children:[/*#__PURE__*/_jsx(ListItemText,{primary:\"Show Phone\",secondary:\"Display phone number on your profile\"}),/*#__PURE__*/_jsx(ListItemSecondaryAction,{children:/*#__PURE__*/_jsx(Switch,{checked:settings.privacy.showPhone,onChange:e=>handleSettingChange('privacy','showPhone',e.target.checked)})})]}),/*#__PURE__*/_jsxs(ListItem,{children:[/*#__PURE__*/_jsx(ListItemText,{primary:\"Allow Messages\",secondary:\"Allow others to send you messages\"}),/*#__PURE__*/_jsx(ListItemSecondaryAction,{children:/*#__PURE__*/_jsx(Switch,{checked:settings.privacy.allowMessages,onChange:e=>handleSettingChange('privacy','allowMessages',e.target.checked)})})]})]})})]})}),/*#__PURE__*/_jsx(Grid,{item:true,xs:12,md:6,children:/*#__PURE__*/_jsxs(Card,{children:[/*#__PURE__*/_jsx(CardHeader,{avatar:/*#__PURE__*/_jsx(LanguageIcon,{}),title:\"Preferences\",subheader:\"Customize your experience\"}),/*#__PURE__*/_jsx(CardContent,{children:/*#__PURE__*/_jsxs(Grid,{container:true,spacing:2,children:[/*#__PURE__*/_jsx(Grid,{item:true,xs:12,children:/*#__PURE__*/_jsxs(FormControl,{fullWidth:true,children:[/*#__PURE__*/_jsx(InputLabel,{children:\"Language\"}),/*#__PURE__*/_jsxs(Select,{value:settings.preferences.language,onChange:e=>handleSettingChange('preferences','language',e.target.value),label:\"Language\",children:[/*#__PURE__*/_jsx(MenuItem,{value:\"en\",children:\"English\"}),/*#__PURE__*/_jsx(MenuItem,{value:\"hi\",children:\"Hindi\"}),/*#__PURE__*/_jsx(MenuItem,{value:\"te\",children:\"Telugu\"}),/*#__PURE__*/_jsx(MenuItem,{value:\"ta\",children:\"Tamil\"}),/*#__PURE__*/_jsx(MenuItem,{value:\"kn\",children:\"Kannada\"})]})]})}),/*#__PURE__*/_jsx(Grid,{item:true,xs:12,children:/*#__PURE__*/_jsxs(FormControl,{fullWidth:true,children:[/*#__PURE__*/_jsx(InputLabel,{children:\"Theme\"}),/*#__PURE__*/_jsxs(Select,{value:settings.preferences.theme,onChange:e=>handleSettingChange('preferences','theme',e.target.value),label:\"Theme\",children:[/*#__PURE__*/_jsx(MenuItem,{value:\"light\",children:\"Light\"}),/*#__PURE__*/_jsx(MenuItem,{value:\"dark\",children:\"Dark\"}),/*#__PURE__*/_jsx(MenuItem,{value:\"system\",children:\"System\"})]})]})}),/*#__PURE__*/_jsx(Grid,{item:true,xs:12,children:/*#__PURE__*/_jsxs(FormControl,{fullWidth:true,children:[/*#__PURE__*/_jsx(InputLabel,{children:\"Timezone\"}),/*#__PURE__*/_jsxs(Select,{value:settings.preferences.timezone,onChange:e=>handleSettingChange('preferences','timezone',e.target.value),label:\"Timezone\",children:[/*#__PURE__*/_jsx(MenuItem,{value:\"Asia/Kolkata\",children:\"Asia/Kolkata (IST)\"}),/*#__PURE__*/_jsx(MenuItem,{value:\"America/New_York\",children:\"America/New_York (EST)\"}),/*#__PURE__*/_jsx(MenuItem,{value:\"Europe/London\",children:\"Europe/London (GMT)\"}),/*#__PURE__*/_jsx(MenuItem,{value:\"Asia/Tokyo\",children:\"Asia/Tokyo (JST)\"})]})]})}),/*#__PURE__*/_jsx(Grid,{item:true,xs:12,children:/*#__PURE__*/_jsxs(FormControl,{fullWidth:true,children:[/*#__PURE__*/_jsx(InputLabel,{children:\"Currency\"}),/*#__PURE__*/_jsxs(Select,{value:settings.preferences.currency,onChange:e=>handleSettingChange('preferences','currency',e.target.value),label:\"Currency\",children:[/*#__PURE__*/_jsx(MenuItem,{value:\"INR\",children:\"Indian Rupee (\\u20B9)\"}),/*#__PURE__*/_jsx(MenuItem,{value:\"USD\",children:\"US Dollar ($)\"}),/*#__PURE__*/_jsx(MenuItem,{value:\"EUR\",children:\"Euro (\\u20AC)\"}),/*#__PURE__*/_jsx(MenuItem,{value:\"GBP\",children:\"British Pound (\\xA3)\"})]})]})})]})})]})}),/*#__PURE__*/_jsx(Grid,{item:true,xs:12,children:/*#__PURE__*/_jsxs(Card,{children:[/*#__PURE__*/_jsx(CardHeader,{avatar:/*#__PURE__*/_jsx(SecurityIcon,{}),title:\"Security\",subheader:\"Manage your account security\"}),/*#__PURE__*/_jsx(CardContent,{children:/*#__PURE__*/_jsxs(Grid,{container:true,spacing:3,children:[/*#__PURE__*/_jsxs(Grid,{item:true,xs:12,md:4,children:[/*#__PURE__*/_jsx(FormControlLabel,{control:/*#__PURE__*/_jsx(Switch,{checked:settings.security.twoFactorEnabled,onChange:e=>handleSettingChange('security','twoFactorEnabled',e.target.checked)}),label:\"Two-Factor Authentication\"}),/*#__PURE__*/_jsx(Typography,{variant:\"caption\",display:\"block\",color:\"textSecondary\",children:\"Add an extra layer of security to your account\"})]}),/*#__PURE__*/_jsx(Grid,{item:true,xs:12,md:4,children:/*#__PURE__*/_jsxs(FormControl,{fullWidth:true,children:[/*#__PURE__*/_jsx(InputLabel,{children:\"Session Timeout (minutes)\"}),/*#__PURE__*/_jsxs(Select,{value:settings.security.sessionTimeout,onChange:e=>handleSettingChange('security','sessionTimeout',e.target.value),label:\"Session Timeout (minutes)\",children:[/*#__PURE__*/_jsx(MenuItem,{value:15,children:\"15 minutes\"}),/*#__PURE__*/_jsx(MenuItem,{value:30,children:\"30 minutes\"}),/*#__PURE__*/_jsx(MenuItem,{value:60,children:\"1 hour\"}),/*#__PURE__*/_jsx(MenuItem,{value:120,children:\"2 hours\"})]})]})}),/*#__PURE__*/_jsxs(Grid,{item:true,xs:12,md:4,children:[/*#__PURE__*/_jsx(FormControlLabel,{control:/*#__PURE__*/_jsx(Switch,{checked:settings.security.loginAlerts,onChange:e=>handleSettingChange('security','loginAlerts',e.target.checked)}),label:\"Login Alerts\"}),/*#__PURE__*/_jsx(Typography,{variant:\"caption\",display:\"block\",color:\"textSecondary\",children:\"Get notified of new logins to your account\"})]})]})})]})}),/*#__PURE__*/_jsx(Grid,{item:true,xs:12,children:/*#__PURE__*/_jsxs(Box,{display:\"flex\",justifyContent:\"end\",gap:2,children:[/*#__PURE__*/_jsx(Button,{variant:\"outlined\",children:\"Reset to Defaults\"}),/*#__PURE__*/_jsx(Button,{variant:\"contained\",startIcon:/*#__PURE__*/_jsx(SaveIcon,{}),onClick:handleSaveSettings,disabled:loading,children:\"Save Settings\"})]})})]}),/*#__PURE__*/_jsxs(Dialog,{open:passwordDialog,onClose:()=>setPasswordDialog(false),maxWidth:\"sm\",fullWidth:true,children:[/*#__PURE__*/_jsx(DialogTitle,{children:\"Change Password\"}),/*#__PURE__*/_jsx(DialogContent,{children:/*#__PURE__*/_jsxs(Grid,{container:true,spacing:2,sx:{mt:1},children:[/*#__PURE__*/_jsx(Grid,{item:true,xs:12,children:/*#__PURE__*/_jsx(TextField,{fullWidth:true,type:\"password\",label:\"Current Password\",value:passwordData.currentPassword,onChange:e=>setPasswordData(_objectSpread(_objectSpread({},passwordData),{},{currentPassword:e.target.value})),required:true})}),/*#__PURE__*/_jsx(Grid,{item:true,xs:12,children:/*#__PURE__*/_jsx(TextField,{fullWidth:true,type:\"password\",label:\"New Password\",value:passwordData.newPassword,onChange:e=>setPasswordData(_objectSpread(_objectSpread({},passwordData),{},{newPassword:e.target.value})),required:true})}),/*#__PURE__*/_jsx(Grid,{item:true,xs:12,children:/*#__PURE__*/_jsx(TextField,{fullWidth:true,type:\"password\",label:\"Confirm New Password\",value:passwordData.confirmPassword,onChange:e=>setPasswordData(_objectSpread(_objectSpread({},passwordData),{},{confirmPassword:e.target.value})),required:true,error:passwordData.confirmPassword!==''&&passwordData.newPassword!==passwordData.confirmPassword,helperText:passwordData.confirmPassword!==''&&passwordData.newPassword!==passwordData.confirmPassword?'Passwords do not match':''})})]})}),/*#__PURE__*/_jsxs(DialogActions,{children:[/*#__PURE__*/_jsx(Button,{onClick:()=>setPasswordDialog(false),startIcon:/*#__PURE__*/_jsx(CancelIcon,{}),children:\"Cancel\"}),/*#__PURE__*/_jsx(Button,{onClick:handleChangePassword,variant:\"contained\",startIcon:/*#__PURE__*/_jsx(SaveIcon,{}),disabled:!passwordData.currentPassword||!passwordData.newPassword||passwordData.newPassword!==passwordData.confirmPassword,children:\"Change Password\"})]})]})]});};export default Settings;","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}