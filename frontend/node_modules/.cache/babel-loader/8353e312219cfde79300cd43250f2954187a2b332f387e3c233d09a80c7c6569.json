{"ast":null,"code":"import React,{useState,useEffect}from'react';import{Box,Card,CardContent,Typography,Grid,Table,TableBody,TableCell,TableContainer,TableHead,TableRow,Paper,Button,Dialog,DialogTitle,DialogContent,DialogActions,TextField,Select,MenuItem,FormControl,InputLabel,Chip,IconButton,Tooltip,Avatar}from'@mui/material';import{Add as AddIcon,Edit as EditIcon,Visibility as ViewIcon,Group as GroupIcon,LocationOn as LocationIcon,Person as PersonIcon}from'@mui/icons-material';import{useApi}from'../hooks/useApi';import api from'../services/api';import LoadingSpinner from'../components/LoadingSpinner';import ErrorAlert from'../components/ErrorAlert';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const AdminGroups=()=>{const[groups,setGroups]=useState([]);const[filteredGroups,setFilteredGroups]=useState([]);const[searchTerm,setSearchTerm]=useState('');const[categoryFilter,setCategoryFilter]=useState('all');const[statusFilter,setStatusFilter]=useState('all');const[selectedGroup,setSelectedGroup]=useState(null);const[dialogOpen,setDialogOpen]=useState(false);const[dialogMode,setDialogMode]=useState('view');const{data:groupsData,loading,error,refetch}=useApi(()=>api.get('/admin/groups'));useEffect(()=>{if(groupsData){setGroups(groupsData.groups||[]);}},[groupsData]);useEffect(()=>{let filtered=groups;if(searchTerm){filtered=filtered.filter(group=>group.group_name.toLowerCase().includes(searchTerm.toLowerCase())||group.group_description.toLowerCase().includes(searchTerm.toLowerCase())||group.creator_name.toLowerCase().includes(searchTerm.toLowerCase()));}if(categoryFilter!=='all'){filtered=filtered.filter(group=>group.group_category===categoryFilter);}if(statusFilter!=='all'){filtered=filtered.filter(group=>group.status===statusFilter);}setFilteredGroups(filtered);},[groups,searchTerm,categoryFilter,statusFilter]);const handleOpenDialog=(mode,group)=>{setDialogMode(mode);setSelectedGroup(group||null);setDialogOpen(true);};const handleCloseDialog=()=>{setDialogOpen(false);setSelectedGroup(null);};const getStatusChip=status=>{const colors={active:'success',pending:'warning',suspended:'error',archived:'info'};return/*#__PURE__*/_jsx(Chip,{label:status.charAt(0).toUpperCase()+status.slice(1),color:colors[status]||'default',size:\"small\"});};const getCategoryChip=category=>{const colors={'Business':'primary','Social':'secondary','Educational':'info','Religious':'warning','Sports':'success'};const color=colors[category]||'default';return/*#__PURE__*/_jsx(Chip,{label:category,color:color,size:\"small\",variant:\"outlined\"});};if(loading)return/*#__PURE__*/_jsx(LoadingSpinner,{});if(error)return/*#__PURE__*/_jsx(ErrorAlert,{error:error});return/*#__PURE__*/_jsxs(Box,{children:[/*#__PURE__*/_jsx(Typography,{variant:\"h4\",gutterBottom:true,children:\"Group Management\"}),/*#__PURE__*/_jsxs(Grid,{container:true,spacing:3,sx:{mb:3},children:[/*#__PURE__*/_jsx(Grid,{item:true,xs:12,sm:6,md:3,children:/*#__PURE__*/_jsx(Card,{children:/*#__PURE__*/_jsx(CardContent,{children:/*#__PURE__*/_jsxs(Box,{sx:{display:'flex',alignItems:'center'},children:[/*#__PURE__*/_jsx(GroupIcon,{color:\"primary\",sx:{mr:2,fontSize:40}}),/*#__PURE__*/_jsxs(Box,{children:[/*#__PURE__*/_jsx(Typography,{variant:\"h4\",children:groups.length}),/*#__PURE__*/_jsx(Typography,{color:\"textSecondary\",children:\"Total Groups\"})]})]})})})}),/*#__PURE__*/_jsx(Grid,{item:true,xs:12,sm:6,md:3,children:/*#__PURE__*/_jsx(Card,{children:/*#__PURE__*/_jsx(CardContent,{children:/*#__PURE__*/_jsxs(Box,{sx:{display:'flex',alignItems:'center'},children:[/*#__PURE__*/_jsx(PersonIcon,{color:\"success\",sx:{mr:2,fontSize:40}}),/*#__PURE__*/_jsxs(Box,{children:[/*#__PURE__*/_jsx(Typography,{variant:\"h4\",children:groups.filter(g=>g.status==='active').length}),/*#__PURE__*/_jsx(Typography,{color:\"textSecondary\",children:\"Active Groups\"})]})]})})})}),/*#__PURE__*/_jsx(Grid,{item:true,xs:12,sm:6,md:3,children:/*#__PURE__*/_jsx(Card,{children:/*#__PURE__*/_jsx(CardContent,{children:/*#__PURE__*/_jsxs(Box,{sx:{display:'flex',alignItems:'center'},children:[/*#__PURE__*/_jsx(LocationIcon,{color:\"warning\",sx:{mr:2,fontSize:40}}),/*#__PURE__*/_jsxs(Box,{children:[/*#__PURE__*/_jsx(Typography,{variant:\"h4\",children:groups.filter(g=>g.status==='pending').length}),/*#__PURE__*/_jsx(Typography,{color:\"textSecondary\",children:\"Pending Approval\"})]})]})})})}),/*#__PURE__*/_jsx(Grid,{item:true,xs:12,sm:6,md:3,children:/*#__PURE__*/_jsx(Card,{children:/*#__PURE__*/_jsx(CardContent,{children:/*#__PURE__*/_jsxs(Box,{sx:{display:'flex',alignItems:'center'},children:[/*#__PURE__*/_jsx(GroupIcon,{color:\"info\",sx:{mr:2,fontSize:40}}),/*#__PURE__*/_jsxs(Box,{children:[/*#__PURE__*/_jsx(Typography,{variant:\"h4\",children:groups.reduce((sum,g)=>sum+g.member_count,0)}),/*#__PURE__*/_jsx(Typography,{color:\"textSecondary\",children:\"Total Members\"})]})]})})})})]}),/*#__PURE__*/_jsx(Card,{sx:{mb:3},children:/*#__PURE__*/_jsxs(CardContent,{children:[/*#__PURE__*/_jsxs(Box,{sx:{display:'flex',gap:2,mb:2,flexWrap:'wrap'},children:[/*#__PURE__*/_jsx(TextField,{label:\"Search Groups\",variant:\"outlined\",size:\"small\",value:searchTerm,onChange:e=>setSearchTerm(e.target.value),sx:{minWidth:250}}),/*#__PURE__*/_jsxs(FormControl,{size:\"small\",sx:{minWidth:120},children:[/*#__PURE__*/_jsx(InputLabel,{children:\"Category\"}),/*#__PURE__*/_jsxs(Select,{value:categoryFilter,onChange:e=>setCategoryFilter(e.target.value),label:\"Category\",children:[/*#__PURE__*/_jsx(MenuItem,{value:\"all\",children:\"All Categories\"}),/*#__PURE__*/_jsx(MenuItem,{value:\"Business\",children:\"Business\"}),/*#__PURE__*/_jsx(MenuItem,{value:\"Social\",children:\"Social\"}),/*#__PURE__*/_jsx(MenuItem,{value:\"Educational\",children:\"Educational\"}),/*#__PURE__*/_jsx(MenuItem,{value:\"Religious\",children:\"Religious\"}),/*#__PURE__*/_jsx(MenuItem,{value:\"Sports\",children:\"Sports\"})]})]}),/*#__PURE__*/_jsxs(FormControl,{size:\"small\",sx:{minWidth:120},children:[/*#__PURE__*/_jsx(InputLabel,{children:\"Status\"}),/*#__PURE__*/_jsxs(Select,{value:statusFilter,onChange:e=>setStatusFilter(e.target.value),label:\"Status\",children:[/*#__PURE__*/_jsx(MenuItem,{value:\"all\",children:\"All Status\"}),/*#__PURE__*/_jsx(MenuItem,{value:\"active\",children:\"Active\"}),/*#__PURE__*/_jsx(MenuItem,{value:\"pending\",children:\"Pending\"}),/*#__PURE__*/_jsx(MenuItem,{value:\"suspended\",children:\"Suspended\"}),/*#__PURE__*/_jsx(MenuItem,{value:\"archived\",children:\"Archived\"})]})]}),/*#__PURE__*/_jsx(Button,{variant:\"contained\",startIcon:/*#__PURE__*/_jsx(AddIcon,{}),onClick:()=>handleOpenDialog('create'),children:\"Create Group\"})]}),/*#__PURE__*/_jsx(TableContainer,{component:Paper,children:/*#__PURE__*/_jsxs(Table,{children:[/*#__PURE__*/_jsx(TableHead,{children:/*#__PURE__*/_jsxs(TableRow,{children:[/*#__PURE__*/_jsx(TableCell,{children:\"Group\"}),/*#__PURE__*/_jsx(TableCell,{children:\"Category\"}),/*#__PURE__*/_jsx(TableCell,{children:\"Creator\"}),/*#__PURE__*/_jsx(TableCell,{children:\"Members\"}),/*#__PURE__*/_jsx(TableCell,{children:\"Location\"}),/*#__PURE__*/_jsx(TableCell,{children:\"Status\"}),/*#__PURE__*/_jsx(TableCell,{children:\"Created\"}),/*#__PURE__*/_jsx(TableCell,{children:\"Actions\"})]})}),/*#__PURE__*/_jsx(TableBody,{children:filteredGroups.map(group=>/*#__PURE__*/_jsxs(TableRow,{children:[/*#__PURE__*/_jsx(TableCell,{children:/*#__PURE__*/_jsxs(Box,{sx:{display:'flex',alignItems:'center'},children:[/*#__PURE__*/_jsx(Avatar,{src:group.group_logo,sx:{mr:2,width:40,height:40},children:/*#__PURE__*/_jsx(GroupIcon,{})}),/*#__PURE__*/_jsxs(Box,{children:[/*#__PURE__*/_jsx(Typography,{variant:\"subtitle2\",children:group.group_name}),/*#__PURE__*/_jsxs(Typography,{variant:\"body2\",color:\"textSecondary\",children:[group.group_description.substring(0,50),\"...\"]})]})]})}),/*#__PURE__*/_jsx(TableCell,{children:getCategoryChip(group.group_category)}),/*#__PURE__*/_jsx(TableCell,{children:group.creator_name}),/*#__PURE__*/_jsx(TableCell,{children:group.member_count}),/*#__PURE__*/_jsxs(TableCell,{children:[/*#__PURE__*/_jsxs(Typography,{variant:\"body2\",children:[group.district,\", \",group.state]}),/*#__PURE__*/_jsx(Typography,{variant:\"caption\",color:\"textSecondary\",children:group.country})]}),/*#__PURE__*/_jsx(TableCell,{children:getStatusChip(group.status)}),/*#__PURE__*/_jsx(TableCell,{children:new Date(group.created_date).toLocaleDateString()}),/*#__PURE__*/_jsxs(TableCell,{children:[/*#__PURE__*/_jsx(Tooltip,{title:\"View Details\",children:/*#__PURE__*/_jsx(IconButton,{size:\"small\",onClick:()=>handleOpenDialog('view',group),children:/*#__PURE__*/_jsx(ViewIcon,{})})}),/*#__PURE__*/_jsx(Tooltip,{title:\"Edit Group\",children:/*#__PURE__*/_jsx(IconButton,{size:\"small\",onClick:()=>handleOpenDialog('edit',group),children:/*#__PURE__*/_jsx(EditIcon,{})})})]})]},group.id))})]})})]})}),/*#__PURE__*/_jsxs(Dialog,{open:dialogOpen,onClose:handleCloseDialog,maxWidth:\"lg\",fullWidth:true,children:[/*#__PURE__*/_jsxs(DialogTitle,{children:[dialogMode==='create'&&'Create New Group',dialogMode==='edit'&&'Edit Group',dialogMode==='view'&&'Group Details']}),/*#__PURE__*/_jsx(DialogContent,{children:selectedGroup&&/*#__PURE__*/_jsx(Box,{sx:{mt:2},children:/*#__PURE__*/_jsxs(Grid,{container:true,spacing:3,children:[/*#__PURE__*/_jsxs(Grid,{item:true,xs:12,md:6,children:[/*#__PURE__*/_jsx(Typography,{variant:\"h6\",gutterBottom:true,children:selectedGroup.group_name}),/*#__PURE__*/_jsx(Typography,{paragraph:true,children:selectedGroup.group_description}),/*#__PURE__*/_jsxs(Typography,{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Category:\"}),\" \",selectedGroup.group_category]}),/*#__PURE__*/_jsxs(Typography,{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Type:\"}),\" \",selectedGroup.group_type]}),/*#__PURE__*/_jsxs(Typography,{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Creator:\"}),\" \",selectedGroup.creator_name]}),/*#__PURE__*/_jsxs(Typography,{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Members:\"}),\" \",selectedGroup.member_count]})]}),/*#__PURE__*/_jsxs(Grid,{item:true,xs:12,md:6,children:[/*#__PURE__*/_jsx(Typography,{variant:\"h6\",gutterBottom:true,children:\"Location & Status\"}),/*#__PURE__*/_jsxs(Typography,{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Country:\"}),\" \",selectedGroup.country]}),/*#__PURE__*/_jsxs(Typography,{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"State:\"}),\" \",selectedGroup.state]}),/*#__PURE__*/_jsxs(Typography,{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"District:\"}),\" \",selectedGroup.district]}),/*#__PURE__*/_jsxs(Typography,{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Status:\"}),\" \",selectedGroup.status]}),/*#__PURE__*/_jsxs(Typography,{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Created:\"}),\" \",new Date(selectedGroup.created_date).toLocaleString()]})]})]})})}),/*#__PURE__*/_jsxs(DialogActions,{children:[/*#__PURE__*/_jsx(Button,{onClick:handleCloseDialog,children:dialogMode==='view'?'Close':'Cancel'}),dialogMode!=='view'&&/*#__PURE__*/_jsx(Button,{variant:\"contained\",onClick:handleCloseDialog,children:dialogMode==='create'?'Create':'Save'})]})]})]});};export default AdminGroups;","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}