{"ast":null,"code":"import React,{useState,useEffect}from'react';import{Box,Paper,Table,TableBody,TableCell,TableContainer,TableHead,TableRow,TextField,Button,Chip,Typography,Grid,Card,CardContent,IconButton,Dialog,DialogTitle,DialogContent,DialogActions}from'@mui/material';import{Search,Add,Edit,Public,Flag}from'@mui/icons-material';import{useApi}from'../hooks/useApi';import api from'../services/api';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const AdminCountries=()=>{const{data,loading,refetch}=useApi(()=>api.get('/admin/countries'));const[countries,setCountries]=useState([]);const[search,setSearch]=useState('');const[openDialog,setOpenDialog]=useState(false);const[editingCountry,setEditingCountry]=useState(null);const fetchCountries=async()=>{try{await refetch();if(data){setCountries(data.countries||[]);}}catch(error){console.error('Error fetching countries:',error);}};useEffect(()=>{fetchCountries();},[]);const filteredCountries=countries.filter(country=>country.country_name.toLowerCase().includes(search.toLowerCase())||country.country_code.toLowerCase().includes(search.toLowerCase()));const handleEdit=country=>{setEditingCountry(country);setOpenDialog(true);};const handleCloseDialog=()=>{setOpenDialog(false);setEditingCountry(null);};return/*#__PURE__*/_jsxs(Box,{sx:{p:3},children:[/*#__PURE__*/_jsxs(Typography,{variant:\"h4\",sx:{mb:3,display:'flex',alignItems:'center'},children:[/*#__PURE__*/_jsx(Public,{sx:{mr:2}}),\"Countries Management\"]}),/*#__PURE__*/_jsxs(Grid,{container:true,spacing:3,sx:{mb:3},children:[/*#__PURE__*/_jsx(Grid,{item:true,xs:12,md:3,children:/*#__PURE__*/_jsx(Card,{children:/*#__PURE__*/_jsxs(CardContent,{children:[/*#__PURE__*/_jsx(Typography,{variant:\"h6\",color:\"primary\",children:\"Total Countries\"}),/*#__PURE__*/_jsx(Typography,{variant:\"h4\",children:countries.length})]})})}),/*#__PURE__*/_jsx(Grid,{item:true,xs:12,md:3,children:/*#__PURE__*/_jsx(Card,{children:/*#__PURE__*/_jsxs(CardContent,{children:[/*#__PURE__*/_jsx(Typography,{variant:\"h6\",color:\"success.main\",children:\"Active Countries\"}),/*#__PURE__*/_jsx(Typography,{variant:\"h4\",children:countries.filter(c=>c.status==='active').length})]})})})]}),/*#__PURE__*/_jsx(Paper,{sx:{p:2,mb:3},children:/*#__PURE__*/_jsxs(Grid,{container:true,spacing:2,alignItems:\"center\",children:[/*#__PURE__*/_jsx(Grid,{item:true,xs:12,md:8,children:/*#__PURE__*/_jsx(TextField,{fullWidth:true,placeholder:\"Search countries...\",value:search,onChange:e=>setSearch(e.target.value),InputProps:{startAdornment:/*#__PURE__*/_jsx(Search,{sx:{color:'action.active',mr:1}})}})}),/*#__PURE__*/_jsx(Grid,{item:true,xs:12,md:4,children:/*#__PURE__*/_jsx(Button,{fullWidth:true,variant:\"contained\",startIcon:/*#__PURE__*/_jsx(Add,{}),onClick:()=>setOpenDialog(true),children:\"Add Country\"})})]})}),/*#__PURE__*/_jsx(TableContainer,{component:Paper,children:/*#__PURE__*/_jsxs(Table,{children:[/*#__PURE__*/_jsx(TableHead,{children:/*#__PURE__*/_jsxs(TableRow,{children:[/*#__PURE__*/_jsx(TableCell,{children:\"Flag\"}),/*#__PURE__*/_jsx(TableCell,{children:\"Country Name\"}),/*#__PURE__*/_jsx(TableCell,{children:\"Country Code\"}),/*#__PURE__*/_jsx(TableCell,{children:\"Status\"}),/*#__PURE__*/_jsx(TableCell,{children:\"Created Date\"}),/*#__PURE__*/_jsx(TableCell,{children:\"Actions\"})]})}),/*#__PURE__*/_jsx(TableBody,{children:loading?/*#__PURE__*/_jsx(TableRow,{children:/*#__PURE__*/_jsx(TableCell,{colSpan:6,align:\"center\",children:\"Loading...\"})}):filteredCountries.length===0?/*#__PURE__*/_jsx(TableRow,{children:/*#__PURE__*/_jsx(TableCell,{colSpan:6,align:\"center\",children:\"No countries found\"})}):filteredCountries.map(country=>/*#__PURE__*/_jsxs(TableRow,{hover:true,children:[/*#__PURE__*/_jsx(TableCell,{children:country.flag_image?/*#__PURE__*/_jsx(\"img\",{src:country.flag_image,alt:country.country_name,style:{width:30,height:20}}):/*#__PURE__*/_jsx(Flag,{color:\"action\"})}),/*#__PURE__*/_jsx(TableCell,{children:/*#__PURE__*/_jsx(Typography,{variant:\"subtitle2\",children:country.country_name})}),/*#__PURE__*/_jsx(TableCell,{children:/*#__PURE__*/_jsx(Chip,{label:country.country_code,size:\"small\",variant:\"outlined\"})}),/*#__PURE__*/_jsx(TableCell,{children:/*#__PURE__*/_jsx(Chip,{label:country.status,color:country.status==='active'?'success':'default',size:\"small\"})}),/*#__PURE__*/_jsx(TableCell,{children:/*#__PURE__*/_jsx(Typography,{variant:\"body2\",children:new Date(country.created_date).toLocaleDateString()})}),/*#__PURE__*/_jsx(TableCell,{children:/*#__PURE__*/_jsx(IconButton,{onClick:()=>handleEdit(country),children:/*#__PURE__*/_jsx(Edit,{})})})]},country.id))})]})}),/*#__PURE__*/_jsxs(Dialog,{open:openDialog,onClose:handleCloseDialog,maxWidth:\"sm\",fullWidth:true,children:[/*#__PURE__*/_jsx(DialogTitle,{children:editingCountry?'Edit Country':'Add Country'}),/*#__PURE__*/_jsxs(DialogContent,{children:[/*#__PURE__*/_jsx(TextField,{fullWidth:true,label:\"Country Name\",margin:\"normal\",defaultValue:(editingCountry===null||editingCountry===void 0?void 0:editingCountry.country_name)||''}),/*#__PURE__*/_jsx(TextField,{fullWidth:true,label:\"Country Code\",margin:\"normal\",defaultValue:(editingCountry===null||editingCountry===void 0?void 0:editingCountry.country_code)||''})]}),/*#__PURE__*/_jsxs(DialogActions,{children:[/*#__PURE__*/_jsx(Button,{onClick:handleCloseDialog,children:\"Cancel\"}),/*#__PURE__*/_jsx(Button,{variant:\"contained\",children:editingCountry?'Update':'Add'})]})]})]});};export default AdminCountries;","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}