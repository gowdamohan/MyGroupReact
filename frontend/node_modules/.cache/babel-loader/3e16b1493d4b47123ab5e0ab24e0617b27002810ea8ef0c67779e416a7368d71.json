{"ast":null,"code":"import _objectSpread from\"D:/MyGroupReact/frontend/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import _objectWithoutProperties from\"D:/MyGroupReact/frontend/node_modules/@babel/runtime/helpers/esm/objectWithoutProperties.js\";const _excluded=[\"children\",\"value\",\"index\"];import React,{useState,useEffect}from'react';import{Container,Typography,Grid,Card,CardContent,CardActions,Button,Box,Dialog,DialogTitle,DialogContent,DialogActions,TextField,FormControl,InputLabel,Select,MenuItem,Chip,Avatar,IconButton,Menu,ListItemIcon,ListItemText,Fab,Rating,Divider,Paper,Tab,Tabs}from'@mui/material';import{Add as AddIcon,Work as WorkIcon,LocationOn as LocationIcon,Phone as PhoneIcon,Star as StarIcon,MoreVert as MoreVertIcon,Edit as EditIcon,Delete as DeleteIcon,Visibility as ViewIcon,Search as SearchIcon}from'@mui/icons-material';import{useAuth}from'../contexts/AuthContext';import api from'../services/api';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";function TabPanel(props){const{children,value,index}=props,other=_objectWithoutProperties(props,_excluded);return/*#__PURE__*/_jsx(\"div\",_objectSpread(_objectSpread({role:\"tabpanel\",hidden:value!==index,id:\"labor-tabpanel-\".concat(index),\"aria-labelledby\":\"labor-tab-\".concat(index)},other),{},{children:value===index&&/*#__PURE__*/_jsx(Box,{sx:{p:0},children:children})}));}const Labor=()=>{const{user}=useAuth();const[tabValue,setTabValue]=useState(0);const[laborProfiles,setLaborProfiles]=useState([]);const[loading,setLoading]=useState(true);const[createDialogOpen,setCreateDialogOpen]=useState(false);const[anchorEl,setAnchorEl]=useState(null);const[selectedProfile,setSelectedProfile]=useState(null);const[searchTerm,setSearchTerm]=useState('');const[filterCategory,setFilterCategory]=useState('');const[newProfile,setNewProfile]=useState({name:'',email:'',phone:'',category:'',sub_category:'',experience_years:0,skills:'',hourly_rate:0,location:'',description:''});const laborCategories=['Construction','Plumbing','Electrical','Carpentry','Painting','Cleaning','Gardening','Mechanical','Welding','Masonry','Roofing','HVAC','Other'];const availabilityColors={available:'success',busy:'warning',unavailable:'error'};useEffect(()=>{fetchLaborProfiles();},[]);const fetchLaborProfiles=async()=>{try{const response=await api.get('/labor');setLaborProfiles(response.data);}catch(error){console.error('Failed to fetch labor profiles:',error);}finally{setLoading(false);}};const handleTabChange=(event,newValue)=>{setTabValue(newValue);};const handleCreateProfile=async()=>{try{const profileData=_objectSpread(_objectSpread({},newProfile),{},{skills:newProfile.skills.split(',').map(skill=>skill.trim())});const response=await api.post('/labor',profileData);setLaborProfiles([response.data,...laborProfiles]);setCreateDialogOpen(false);setNewProfile({name:'',email:'',phone:'',category:'',sub_category:'',experience_years:0,skills:'',hourly_rate:0,location:'',description:''});}catch(error){console.error('Failed to create labor profile:',error);}};const handleMenuClick=(event,profile)=>{setAnchorEl(event.currentTarget);setSelectedProfile(profile);};const handleMenuClose=()=>{setAnchorEl(null);setSelectedProfile(null);};const filteredProfiles=laborProfiles.filter(profile=>{const matchesSearch=profile.name.toLowerCase().includes(searchTerm.toLowerCase())||profile.category.toLowerCase().includes(searchTerm.toLowerCase())||profile.skills.some(skill=>skill.toLowerCase().includes(searchTerm.toLowerCase()));const matchesCategory=!filterCategory||profile.category===filterCategory;return matchesSearch&&matchesCategory;});const renderLaborCard=profile=>/*#__PURE__*/_jsxs(Card,{sx:{height:'100%',display:'flex',flexDirection:'column'},children:[/*#__PURE__*/_jsxs(CardContent,{sx:{flexGrow:1},children:[/*#__PURE__*/_jsxs(Box,{display:\"flex\",justifyContent:\"space-between\",alignItems:\"flex-start\",mb:2,children:[/*#__PURE__*/_jsxs(Box,{display:\"flex\",alignItems:\"center\",gap:2,children:[/*#__PURE__*/_jsx(Avatar,{src:profile.profile_image,alt:profile.name,sx:{width:56,height:56},children:profile.name.charAt(0)}),/*#__PURE__*/_jsxs(Box,{children:[/*#__PURE__*/_jsx(Typography,{variant:\"h6\",component:\"h2\",children:profile.name}),/*#__PURE__*/_jsxs(Box,{display:\"flex\",alignItems:\"center\",gap:1,children:[/*#__PURE__*/_jsx(Rating,{value:profile.rating,readOnly:true,size:\"small\"}),/*#__PURE__*/_jsxs(Typography,{variant:\"body2\",color:\"textSecondary\",children:[\"(\",profile.total_jobs,\" jobs)\"]})]})]})]}),/*#__PURE__*/_jsx(IconButton,{size:\"small\",onClick:e=>handleMenuClick(e,profile),children:/*#__PURE__*/_jsx(MoreVertIcon,{})})]}),/*#__PURE__*/_jsxs(Box,{display:\"flex\",alignItems:\"center\",gap:1,mb:2,children:[/*#__PURE__*/_jsx(Chip,{label:profile.category,size:\"small\",color:\"primary\"}),/*#__PURE__*/_jsx(Chip,{label:profile.availability,size:\"small\",color:availabilityColors[profile.availability],variant:\"outlined\"}),profile.is_verified&&/*#__PURE__*/_jsx(Chip,{label:\"Verified\",size:\"small\",color:\"success\",icon:/*#__PURE__*/_jsx(StarIcon,{})})]}),/*#__PURE__*/_jsxs(Typography,{variant:\"body2\",color:\"textSecondary\",gutterBottom:true,children:[profile.sub_category,\" \\u2022 \",profile.experience_years,\" years experience\"]}),/*#__PURE__*/_jsx(Typography,{variant:\"body2\",paragraph:true,children:profile.description}),/*#__PURE__*/_jsxs(Box,{display:\"flex\",\"flex-wrap\":\"wrap\",gap:0.5,mb:2,children:[profile.skills.slice(0,3).map((skill,index)=>/*#__PURE__*/_jsx(Chip,{label:skill,size:\"small\",variant:\"outlined\"},index)),profile.skills.length>3&&/*#__PURE__*/_jsx(Chip,{label:\"+\".concat(profile.skills.length-3,\" more\"),size:\"small\",variant:\"outlined\"})]}),/*#__PURE__*/_jsx(Divider,{sx:{my:2}}),/*#__PURE__*/_jsxs(Box,{display:\"flex\",\"justify-content\":\"space-between\",alignItems:\"center\",children:[/*#__PURE__*/_jsxs(Box,{display:\"flex\",alignItems:\"center\",gap:1,children:[/*#__PURE__*/_jsx(LocationIcon,{fontSize:\"small\",color:\"action\"}),/*#__PURE__*/_jsx(Typography,{variant:\"body2\",color:\"textSecondary\",children:profile.location})]}),/*#__PURE__*/_jsxs(Typography,{variant:\"h6\",color:\"primary\",children:[\"\\u20B9\",profile.hourly_rate,\"/hr\"]})]})]}),/*#__PURE__*/_jsxs(CardActions,{children:[/*#__PURE__*/_jsx(Button,{size:\"small\",startIcon:/*#__PURE__*/_jsx(PhoneIcon,{}),children:\"Contact\"}),/*#__PURE__*/_jsx(Button,{size:\"small\",startIcon:/*#__PURE__*/_jsx(ViewIcon,{}),children:\"View Profile\"})]})]},profile.id);return/*#__PURE__*/_jsxs(Container,{maxWidth:\"lg\",sx:{mt:4,mb:4},children:[/*#__PURE__*/_jsxs(Box,{display:\"flex\",justifyContent:\"space-between\",alignItems:\"center\",mb:4,children:[/*#__PURE__*/_jsx(Typography,{variant:\"h4\",component:\"h1\",fontWeight:\"bold\",children:\"Labor Management\"}),/*#__PURE__*/_jsx(Button,{variant:\"contained\",startIcon:/*#__PURE__*/_jsx(AddIcon,{}),onClick:()=>setCreateDialogOpen(true),size:\"large\",children:\"Add Labor Profile\"})]}),/*#__PURE__*/_jsx(Paper,{sx:{width:'100%',mb:3},children:/*#__PURE__*/_jsxs(Tabs,{value:tabValue,onChange:handleTabChange,\"aria-label\":\"labor tabs\",children:[/*#__PURE__*/_jsx(Tab,{label:\"All Profiles\"}),/*#__PURE__*/_jsx(Tab,{label:\"My Profiles\"}),/*#__PURE__*/_jsx(Tab,{label:\"Contractors\"}),/*#__PURE__*/_jsx(Tab,{label:\"Categories\"})]})}),/*#__PURE__*/_jsx(Paper,{sx:{p:2,mb:3},children:/*#__PURE__*/_jsxs(Grid,{container:true,spacing:2,alignItems:\"center\",children:[/*#__PURE__*/_jsx(Grid,{item:true,xs:12,md:6,children:/*#__PURE__*/_jsx(TextField,{fullWidth:true,placeholder:\"Search by name, category, or skills...\",value:searchTerm,onChange:e=>setSearchTerm(e.target.value),InputProps:{startAdornment:/*#__PURE__*/_jsx(SearchIcon,{sx:{mr:1,color:'action.active'}})},size:\"small\"})}),/*#__PURE__*/_jsx(Grid,{item:true,xs:12,md:3,children:/*#__PURE__*/_jsxs(FormControl,{fullWidth:true,size:\"small\",children:[/*#__PURE__*/_jsx(InputLabel,{children:\"Category\"}),/*#__PURE__*/_jsxs(Select,{value:filterCategory,onChange:e=>setFilterCategory(e.target.value),label:\"Category\",children:[/*#__PURE__*/_jsx(MenuItem,{value:\"\",children:\"All Categories\"}),laborCategories.map(category=>/*#__PURE__*/_jsx(MenuItem,{value:category,children:category},category))]})]})}),/*#__PURE__*/_jsx(Grid,{item:true,xs:12,md:3,children:/*#__PURE__*/_jsxs(Typography,{variant:\"body2\",color:\"textSecondary\",children:[filteredProfiles.length,\" profiles found\"]})})]})}),/*#__PURE__*/_jsx(TabPanel,{value:tabValue,index:0,children:/*#__PURE__*/_jsxs(Grid,{container:true,spacing:3,children:[filteredProfiles.map(profile=>/*#__PURE__*/_jsx(Grid,{item:true,xs:12,md:6,lg:4,children:renderLaborCard(profile)},profile.id)),filteredProfiles.length===0&&/*#__PURE__*/_jsx(Grid,{item:true,xs:12,children:/*#__PURE__*/_jsxs(Box,{textAlign:\"center\",py:8,children:[/*#__PURE__*/_jsx(WorkIcon,{sx:{fontSize:64,color:'text.secondary',mb:2}}),/*#__PURE__*/_jsx(Typography,{variant:\"h6\",color:\"textSecondary\",gutterBottom:true,children:\"No labor profiles found\"}),/*#__PURE__*/_jsx(Typography,{variant:\"body1\",color:\"textSecondary\",mb:3,children:\"Try adjusting your search criteria or add a new labor profile.\"}),/*#__PURE__*/_jsx(Button,{variant:\"contained\",startIcon:/*#__PURE__*/_jsx(AddIcon,{}),onClick:()=>setCreateDialogOpen(true),children:\"Add Labor Profile\"})]})})]})}),/*#__PURE__*/_jsx(TabPanel,{value:tabValue,index:1,children:/*#__PURE__*/_jsx(Typography,{variant:\"h6\",gutterBottom:true,children:\"My Labor Profiles\"})}),/*#__PURE__*/_jsx(TabPanel,{value:tabValue,index:2,children:/*#__PURE__*/_jsx(Typography,{variant:\"h6\",gutterBottom:true,children:\"Contractors\"})}),/*#__PURE__*/_jsx(TabPanel,{value:tabValue,index:3,children:/*#__PURE__*/_jsx(Typography,{variant:\"h6\",gutterBottom:true,children:\"Categories\"})}),/*#__PURE__*/_jsxs(Dialog,{open:createDialogOpen,onClose:()=>setCreateDialogOpen(false),maxWidth:\"md\",fullWidth:true,children:[/*#__PURE__*/_jsx(DialogTitle,{children:\"Add New Labor Profile\"}),/*#__PURE__*/_jsx(DialogContent,{children:/*#__PURE__*/_jsxs(Grid,{container:true,spacing:2,sx:{mt:1},children:[/*#__PURE__*/_jsx(Grid,{item:true,xs:12,sm:6,children:/*#__PURE__*/_jsx(TextField,{fullWidth:true,label:\"Name\",value:newProfile.name,onChange:e=>setNewProfile(_objectSpread(_objectSpread({},newProfile),{},{name:e.target.value})),required:true})}),/*#__PURE__*/_jsx(Grid,{item:true,xs:12,sm:6,children:/*#__PURE__*/_jsx(TextField,{fullWidth:true,label:\"Email\",type:\"email\",value:newProfile.email,onChange:e=>setNewProfile(_objectSpread(_objectSpread({},newProfile),{},{email:e.target.value})),required:true})}),/*#__PURE__*/_jsx(Grid,{item:true,xs:12,sm:6,children:/*#__PURE__*/_jsx(TextField,{fullWidth:true,label:\"Phone\",value:newProfile.phone,onChange:e=>setNewProfile(_objectSpread(_objectSpread({},newProfile),{},{phone:e.target.value})),required:true})}),/*#__PURE__*/_jsx(Grid,{item:true,xs:12,sm:6,children:/*#__PURE__*/_jsx(TextField,{fullWidth:true,label:\"Location\",value:newProfile.location,onChange:e=>setNewProfile(_objectSpread(_objectSpread({},newProfile),{},{location:e.target.value})),required:true})}),/*#__PURE__*/_jsx(Grid,{item:true,xs:12,sm:6,children:/*#__PURE__*/_jsxs(FormControl,{fullWidth:true,children:[/*#__PURE__*/_jsx(InputLabel,{children:\"Category\"}),/*#__PURE__*/_jsx(Select,{value:newProfile.category,onChange:e=>setNewProfile(_objectSpread(_objectSpread({},newProfile),{},{category:e.target.value})),label:\"Category\",required:true,children:laborCategories.map(category=>/*#__PURE__*/_jsx(MenuItem,{value:category,children:category},category))})]})}),/*#__PURE__*/_jsx(Grid,{item:true,xs:12,sm:6,children:/*#__PURE__*/_jsx(TextField,{fullWidth:true,label:\"Sub Category\",value:newProfile.sub_category,onChange:e=>setNewProfile(_objectSpread(_objectSpread({},newProfile),{},{sub_category:e.target.value}))})}),/*#__PURE__*/_jsx(Grid,{item:true,xs:12,sm:6,children:/*#__PURE__*/_jsx(TextField,{fullWidth:true,label:\"Experience (Years)\",type:\"number\",value:newProfile.experience_years,onChange:e=>setNewProfile(_objectSpread(_objectSpread({},newProfile),{},{experience_years:parseInt(e.target.value)||0}))})}),/*#__PURE__*/_jsx(Grid,{item:true,xs:12,sm:6,children:/*#__PURE__*/_jsx(TextField,{fullWidth:true,label:\"Hourly Rate (\\u20B9)\",type:\"number\",value:newProfile.hourly_rate,onChange:e=>setNewProfile(_objectSpread(_objectSpread({},newProfile),{},{hourly_rate:parseInt(e.target.value)||0}))})}),/*#__PURE__*/_jsx(Grid,{item:true,xs:12,children:/*#__PURE__*/_jsx(TextField,{fullWidth:true,label:\"Skills (comma separated)\",value:newProfile.skills,onChange:e=>setNewProfile(_objectSpread(_objectSpread({},newProfile),{},{skills:e.target.value})),placeholder:\"e.g., Welding, Metal Fabrication, Blueprint Reading\"})}),/*#__PURE__*/_jsx(Grid,{item:true,xs:12,children:/*#__PURE__*/_jsx(TextField,{fullWidth:true,label:\"Description\",value:newProfile.description,onChange:e=>setNewProfile(_objectSpread(_objectSpread({},newProfile),{},{description:e.target.value})),multiline:true,rows:3})})]})}),/*#__PURE__*/_jsxs(DialogActions,{children:[/*#__PURE__*/_jsx(Button,{onClick:()=>setCreateDialogOpen(false),children:\"Cancel\"}),/*#__PURE__*/_jsx(Button,{onClick:handleCreateProfile,variant:\"contained\",disabled:!newProfile.name||!newProfile.email||!newProfile.phone||!newProfile.category,children:\"Add Profile\"})]})]}),/*#__PURE__*/_jsxs(Menu,{anchorEl:anchorEl,open:Boolean(anchorEl),onClose:handleMenuClose,children:[/*#__PURE__*/_jsxs(MenuItem,{onClick:handleMenuClose,children:[/*#__PURE__*/_jsx(ListItemIcon,{children:/*#__PURE__*/_jsx(ViewIcon,{fontSize:\"small\"})}),/*#__PURE__*/_jsx(ListItemText,{children:\"View Details\"})]}),/*#__PURE__*/_jsxs(MenuItem,{onClick:handleMenuClose,children:[/*#__PURE__*/_jsx(ListItemIcon,{children:/*#__PURE__*/_jsx(EditIcon,{fontSize:\"small\"})}),/*#__PURE__*/_jsx(ListItemText,{children:\"Edit Profile\"})]}),/*#__PURE__*/_jsxs(MenuItem,{onClick:handleMenuClose,sx:{color:'error.main'},children:[/*#__PURE__*/_jsx(ListItemIcon,{children:/*#__PURE__*/_jsx(DeleteIcon,{fontSize:\"small\",color:\"error\"})}),/*#__PURE__*/_jsx(ListItemText,{children:\"Delete Profile\"})]})]}),/*#__PURE__*/_jsx(Fab,{color:\"primary\",\"aria-label\":\"add\",sx:{position:'fixed',bottom:16,right:16,display:{xs:'flex',md:'none'}},onClick:()=>setCreateDialogOpen(true),children:/*#__PURE__*/_jsx(AddIcon,{})})]});};export default Labor;","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}