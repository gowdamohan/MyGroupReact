{"ast":null,"code":"import React,{useState,useEffect}from'react';import{Box,Paper,Table,TableBody,TableCell,TableContainer,TableHead,TablePagination,TableRow,TextField,FormControl,InputLabel,Select,MenuItem,Button,Chip,Avatar,Typography,Grid,Card,CardContent}from'@mui/material';import{Search,FilterList,Person,Work,LocationOn}from'@mui/icons-material';import{useApi}from'../hooks/useApi';import api from'../services/api';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const AdminLabor=()=>{const{data,loading,refetch}=useApi(()=>api.get('/admin/labor',{params:{page:page+1,limit:rowsPerPage,search,category:categoryFilter,status:statusFilter}}));const[labor,setLabor]=useState([]);const[page,setPage]=useState(0);const[rowsPerPage,setRowsPerPage]=useState(10);const[totalCount,setTotalCount]=useState(0);const[search,setSearch]=useState('');const[categoryFilter,setCategoryFilter]=useState('all');const[statusFilter,setStatusFilter]=useState('all');const fetchLabor=async()=>{try{await refetch();if(data){setLabor(data.labor||[]);setTotalCount(typeof data.total==='number'?data.total:0);}}catch(error){console.error('Error fetching labor:',error);}};useEffect(()=>{fetchLabor();},[page,rowsPerPage,search,categoryFilter,statusFilter]);const handleChangePage=(_,newPage)=>{setPage(newPage);};const handleChangeRowsPerPage=event=>{setRowsPerPage(parseInt(event.target.value,10));setPage(0);};const getStatusColor=status=>{switch(status){case'active':return'success';case'inactive':return'error';default:return'default';}};return/*#__PURE__*/_jsxs(Box,{sx:{p:3},children:[/*#__PURE__*/_jsxs(Typography,{variant:\"h4\",sx:{mb:3,display:'flex',alignItems:'center'},children:[/*#__PURE__*/_jsx(Work,{sx:{mr:2}}),\"Labor Management\"]}),/*#__PURE__*/_jsx(Grid,{container:true,spacing:3,sx:{mb:3},children:/*#__PURE__*/_jsx(Grid,{item:true,xs:12,md:3,children:/*#__PURE__*/_jsx(Card,{children:/*#__PURE__*/_jsxs(CardContent,{children:[/*#__PURE__*/_jsx(Typography,{variant:\"h6\",color:\"primary\",children:\"Total Labor\"}),/*#__PURE__*/_jsx(Typography,{variant:\"h4\",children:totalCount})]})})})}),/*#__PURE__*/_jsx(Paper,{sx:{p:2,mb:3},children:/*#__PURE__*/_jsxs(Grid,{container:true,spacing:2,alignItems:\"center\",children:[/*#__PURE__*/_jsx(Grid,{item:true,xs:12,md:4,children:/*#__PURE__*/_jsx(TextField,{fullWidth:true,placeholder:\"Search labor...\",value:search,onChange:e=>setSearch(e.target.value),InputProps:{startAdornment:/*#__PURE__*/_jsx(Search,{sx:{color:'action.active',mr:1}})}})}),/*#__PURE__*/_jsx(Grid,{item:true,xs:12,md:3,children:/*#__PURE__*/_jsxs(FormControl,{fullWidth:true,children:[/*#__PURE__*/_jsx(InputLabel,{children:\"Category\"}),/*#__PURE__*/_jsxs(Select,{value:categoryFilter,onChange:e=>setCategoryFilter(e.target.value),label:\"Category\",children:[/*#__PURE__*/_jsx(MenuItem,{value:\"all\",children:\"All Categories\"}),/*#__PURE__*/_jsx(MenuItem,{value:\"Construction\",children:\"Construction\"}),/*#__PURE__*/_jsx(MenuItem,{value:\"Electrical\",children:\"Electrical\"}),/*#__PURE__*/_jsx(MenuItem,{value:\"Plumbing\",children:\"Plumbing\"}),/*#__PURE__*/_jsx(MenuItem,{value:\"Carpentry\",children:\"Carpentry\"}),/*#__PURE__*/_jsx(MenuItem,{value:\"Other\",children:\"Other\"})]})]})}),/*#__PURE__*/_jsx(Grid,{item:true,xs:12,md:3,children:/*#__PURE__*/_jsxs(FormControl,{fullWidth:true,children:[/*#__PURE__*/_jsx(InputLabel,{children:\"Status\"}),/*#__PURE__*/_jsxs(Select,{value:statusFilter,onChange:e=>setStatusFilter(e.target.value),label:\"Status\",children:[/*#__PURE__*/_jsx(MenuItem,{value:\"all\",children:\"All Status\"}),/*#__PURE__*/_jsx(MenuItem,{value:\"active\",children:\"Active\"}),/*#__PURE__*/_jsx(MenuItem,{value:\"inactive\",children:\"Inactive\"})]})]})}),/*#__PURE__*/_jsx(Grid,{item:true,xs:12,md:2,children:/*#__PURE__*/_jsx(Button,{fullWidth:true,variant:\"outlined\",startIcon:/*#__PURE__*/_jsx(FilterList,{}),onClick:()=>{setSearch('');setCategoryFilter('all');setStatusFilter('all');},children:\"Clear\"})})]})}),/*#__PURE__*/_jsxs(TableContainer,{component:Paper,children:[/*#__PURE__*/_jsxs(Table,{children:[/*#__PURE__*/_jsx(TableHead,{children:/*#__PURE__*/_jsxs(TableRow,{children:[/*#__PURE__*/_jsx(TableCell,{children:\"Labor\"}),/*#__PURE__*/_jsx(TableCell,{children:\"Category\"}),/*#__PURE__*/_jsx(TableCell,{children:\"Contact\"}),/*#__PURE__*/_jsx(TableCell,{children:\"Experience\"}),/*#__PURE__*/_jsx(TableCell,{children:\"Location\"}),/*#__PURE__*/_jsx(TableCell,{children:\"Status\"}),/*#__PURE__*/_jsx(TableCell,{children:\"Created Date\"})]})}),/*#__PURE__*/_jsx(TableBody,{children:loading?/*#__PURE__*/_jsx(TableRow,{children:/*#__PURE__*/_jsx(TableCell,{colSpan:7,align:\"center\",children:\"Loading...\"})}):labor.length===0?/*#__PURE__*/_jsx(TableRow,{children:/*#__PURE__*/_jsx(TableCell,{colSpan:7,align:\"center\",children:\"No labor found\"})}):labor.map(laborItem=>{var _laborItem$country,_laborItem$state,_laborItem$district;return/*#__PURE__*/_jsxs(TableRow,{hover:true,children:[/*#__PURE__*/_jsx(TableCell,{children:/*#__PURE__*/_jsxs(Box,{sx:{display:'flex',alignItems:'center'},children:[/*#__PURE__*/_jsx(Avatar,{sx:{mr:2,bgcolor:'primary.main'},children:/*#__PURE__*/_jsx(Person,{})}),/*#__PURE__*/_jsxs(Box,{children:[/*#__PURE__*/_jsx(Typography,{variant:\"subtitle2\",children:laborItem.labor_name}),laborItem.user&&/*#__PURE__*/_jsxs(Typography,{variant:\"caption\",color:\"text.secondary\",children:[laborItem.user.first_name,\" \",laborItem.user.last_name]})]})]})}),/*#__PURE__*/_jsx(TableCell,{children:/*#__PURE__*/_jsx(Chip,{label:laborItem.labor_category,size:\"small\",variant:\"outlined\"})}),/*#__PURE__*/_jsxs(TableCell,{children:[/*#__PURE__*/_jsx(Typography,{variant:\"body2\",children:laborItem.phone}),/*#__PURE__*/_jsx(Typography,{variant:\"caption\",color:\"text.secondary\",children:laborItem.email})]}),/*#__PURE__*/_jsx(TableCell,{children:/*#__PURE__*/_jsx(Typography,{variant:\"body2\",children:laborItem.experience})}),/*#__PURE__*/_jsx(TableCell,{children:/*#__PURE__*/_jsxs(Box,{sx:{display:'flex',alignItems:'center'},children:[/*#__PURE__*/_jsx(LocationOn,{fontSize:\"small\",sx:{mr:0.5,color:'text.secondary'}}),/*#__PURE__*/_jsxs(Box,{children:[/*#__PURE__*/_jsx(Typography,{variant:\"caption\",display:\"block\",children:(_laborItem$country=laborItem.country)===null||_laborItem$country===void 0?void 0:_laborItem$country.country_name}),/*#__PURE__*/_jsxs(Typography,{variant:\"caption\",color:\"text.secondary\",children:[(_laborItem$state=laborItem.state)===null||_laborItem$state===void 0?void 0:_laborItem$state.state_name,\", \",(_laborItem$district=laborItem.district)===null||_laborItem$district===void 0?void 0:_laborItem$district.district_name]})]})]})}),/*#__PURE__*/_jsx(TableCell,{children:/*#__PURE__*/_jsx(Chip,{label:laborItem.status,color:getStatusColor(laborItem.status),size:\"small\"})}),/*#__PURE__*/_jsx(TableCell,{children:/*#__PURE__*/_jsx(Typography,{variant:\"body2\",children:new Date(laborItem.created_date).toLocaleDateString()})})]},laborItem.id);})})]}),/*#__PURE__*/_jsx(TablePagination,{rowsPerPageOptions:[5,10,25],component:\"div\",count:totalCount,rowsPerPage:rowsPerPage,page:page,onPageChange:handleChangePage,onRowsPerPageChange:handleChangeRowsPerPage})]})]});};export default AdminLabor;","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}