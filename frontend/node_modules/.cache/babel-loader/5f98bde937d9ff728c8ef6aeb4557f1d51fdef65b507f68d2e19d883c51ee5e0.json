{"ast":null,"code":"import React from'react';import{Container,Typography,Grid,Card,CardContent,Box,Paper,List,ListItem,ListItemText,Chip,Button,Avatar}from'@mui/material';import{People as PeopleIcon,Groups as GroupIcon,Work as WorkIcon,HelpOutline as HelpIcon,Add as AddIcon}from'@mui/icons-material';import{useAuth}from'../contexts/AuthContext';import{useApi}from'../hooks/useApi';import api from'../services/api';import LoadingSpinner from'../components/LoadingSpinner';import ErrorAlert from'../components/ErrorAlert';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const Dashboard=()=>{var _stats$groups,_stats$laborProfiles,_stats$needyServices,_stats$user;const{user}=useAuth();const isAdmin=(user===null||user===void 0?void 0:user.role)==='admin';const{data:dashboardData,loading:dashboardLoading,error:dashboardError,refetch:refetchDashboard}=useApi(()=>api.get('/dashboard'));const{data:activityData,loading:activityLoading,error:activityError}=useApi(()=>api.get('/activity-feed?limit=10'));const stats=dashboardData||{};const activities=(activityData===null||activityData===void 0?void 0:activityData.activities)||[];const formatDate=dateString=>{return new Date(dateString).toLocaleDateString('en-US',{year:'numeric',month:'short',day:'numeric',hour:'2-digit',minute:'2-digit'});};const getActivityIcon=type=>{switch(type){case'group':return/*#__PURE__*/_jsx(GroupIcon,{});case'labor':return/*#__PURE__*/_jsx(WorkIcon,{});case'service':return/*#__PURE__*/_jsx(HelpIcon,{});default:return/*#__PURE__*/_jsx(GroupIcon,{});}};if(dashboardLoading){return/*#__PURE__*/_jsx(LoadingSpinner,{fullPage:true,message:\"Loading dashboard...\"});}return/*#__PURE__*/_jsxs(Container,{maxWidth:\"lg\",sx:{mt:4,mb:4},children:[/*#__PURE__*/_jsxs(Typography,{variant:\"h4\",gutterBottom:true,children:[\"Welcome back, \",user===null||user===void 0?void 0:user.first_name,\"!\"]}),/*#__PURE__*/_jsx(ErrorAlert,{error:dashboardError}),/*#__PURE__*/_jsxs(Grid,{container:true,spacing:3,children:[/*#__PURE__*/_jsx(Grid,{item:true,xs:12,sm:6,md:3,children:/*#__PURE__*/_jsx(Card,{children:/*#__PURE__*/_jsx(CardContent,{children:/*#__PURE__*/_jsxs(Box,{display:\"flex\",alignItems:\"center\",gap:2,children:[/*#__PURE__*/_jsx(Avatar,{sx:{bgcolor:'primary.main'},children:/*#__PURE__*/_jsx(GroupIcon,{})}),/*#__PURE__*/_jsxs(Box,{children:[/*#__PURE__*/_jsx(Typography,{color:\"textSecondary\",gutterBottom:true,children:\"My Groups\"}),/*#__PURE__*/_jsx(Typography,{variant:\"h5\",component:\"div\",children:((_stats$groups=stats.groups)===null||_stats$groups===void 0?void 0:_stats$groups.length)||0})]})]})})})}),/*#__PURE__*/_jsx(Grid,{item:true,xs:12,sm:6,md:3,children:/*#__PURE__*/_jsx(Card,{children:/*#__PURE__*/_jsx(CardContent,{children:/*#__PURE__*/_jsxs(Box,{display:\"flex\",alignItems:\"center\",gap:2,children:[/*#__PURE__*/_jsx(Avatar,{sx:{bgcolor:'secondary.main'},children:/*#__PURE__*/_jsx(WorkIcon,{})}),/*#__PURE__*/_jsxs(Box,{children:[/*#__PURE__*/_jsx(Typography,{color:\"textSecondary\",gutterBottom:true,children:\"Labor Profiles\"}),/*#__PURE__*/_jsx(Typography,{variant:\"h5\",component:\"div\",children:((_stats$laborProfiles=stats.laborProfiles)===null||_stats$laborProfiles===void 0?void 0:_stats$laborProfiles.length)||0})]})]})})})}),/*#__PURE__*/_jsx(Grid,{item:true,xs:12,sm:6,md:3,children:/*#__PURE__*/_jsx(Card,{children:/*#__PURE__*/_jsx(CardContent,{children:/*#__PURE__*/_jsxs(Box,{display:\"flex\",alignItems:\"center\",gap:2,children:[/*#__PURE__*/_jsx(Avatar,{sx:{bgcolor:'success.main'},children:/*#__PURE__*/_jsx(HelpIcon,{})}),/*#__PURE__*/_jsxs(Box,{children:[/*#__PURE__*/_jsx(Typography,{color:\"textSecondary\",gutterBottom:true,children:\"Service Requests\"}),/*#__PURE__*/_jsx(Typography,{variant:\"h5\",component:\"div\",children:((_stats$needyServices=stats.needyServices)===null||_stats$needyServices===void 0?void 0:_stats$needyServices.length)||0})]})]})})})}),/*#__PURE__*/_jsx(Grid,{item:true,xs:12,sm:6,md:3,children:/*#__PURE__*/_jsx(Card,{children:/*#__PURE__*/_jsx(CardContent,{children:/*#__PURE__*/_jsxs(Box,{display:\"flex\",alignItems:\"center\",gap:2,children:[/*#__PURE__*/_jsx(Avatar,{sx:{bgcolor:'warning.main'},children:/*#__PURE__*/_jsx(PeopleIcon,{})}),/*#__PURE__*/_jsxs(Box,{children:[/*#__PURE__*/_jsx(Typography,{color:\"textSecondary\",gutterBottom:true,children:\"Profile Status\"}),/*#__PURE__*/_jsx(Typography,{variant:\"h6\",component:\"div\",children:(_stats$user=stats.user)!==null&&_stats$user!==void 0&&_stats$user.profile?/*#__PURE__*/_jsx(Chip,{label:\"Complete\",color:\"success\",size:\"small\"}):/*#__PURE__*/_jsx(Chip,{label:\"Incomplete\",color:\"warning\",size:\"small\"})})]})]})})})}),/*#__PURE__*/_jsx(Grid,{item:true,xs:12,md:8,children:/*#__PURE__*/_jsxs(Paper,{sx:{p:2},children:[/*#__PURE__*/_jsx(Typography,{variant:\"h6\",gutterBottom:true,children:\"Recent Activity\"}),/*#__PURE__*/_jsx(ErrorAlert,{error:activityError}),activityLoading?/*#__PURE__*/_jsx(LoadingSpinner,{message:\"Loading activities...\"}):activities.length>0?/*#__PURE__*/_jsx(List,{children:activities.map(activity=>/*#__PURE__*/_jsxs(ListItem,{divider:true,children:[/*#__PURE__*/_jsx(Avatar,{sx:{mr:2,bgcolor:'grey.100'},children:getActivityIcon(activity.type)}),/*#__PURE__*/_jsx(ListItemText,{primary:activity.title,secondary:/*#__PURE__*/_jsxs(Box,{display:\"flex\",alignItems:\"center\",gap:1,children:[/*#__PURE__*/_jsx(Typography,{variant:\"body2\",color:\"textSecondary\",children:activity.user&&\"\".concat(activity.user.first_name,\" \").concat(activity.user.last_name)}),/*#__PURE__*/_jsxs(Typography,{variant:\"caption\",color:\"textSecondary\",children:[\"\\u2022 \",formatDate(activity.date)]})]})})]},activity.id))}):/*#__PURE__*/_jsx(Typography,{variant:\"body2\",color:\"textSecondary\",children:\"No recent activity to display.\"})]})}),/*#__PURE__*/_jsx(Grid,{item:true,xs:12,md:4,children:/*#__PURE__*/_jsxs(Paper,{sx:{p:2},children:[/*#__PURE__*/_jsx(Typography,{variant:\"h6\",gutterBottom:true,children:\"Quick Actions\"}),/*#__PURE__*/_jsxs(Box,{display:\"flex\",flexDirection:\"column\",gap:2,children:[/*#__PURE__*/_jsx(Button,{variant:\"contained\",startIcon:/*#__PURE__*/_jsx(AddIcon,{}),fullWidth:true,href:\"/groups\",children:\"Create Group\"}),/*#__PURE__*/_jsx(Button,{variant:\"outlined\",startIcon:/*#__PURE__*/_jsx(WorkIcon,{}),fullWidth:true,href:\"/labor\",children:\"Add Labor Profile\"}),/*#__PURE__*/_jsx(Button,{variant:\"outlined\",startIcon:/*#__PURE__*/_jsx(HelpIcon,{}),fullWidth:true,href:\"/needy\",children:\"Request Service\"}),/*#__PURE__*/_jsx(Button,{variant:\"outlined\",fullWidth:true,href:\"/profile\",children:\"Update Profile\"})]})]})})]})]});};export default Dashboard;","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}