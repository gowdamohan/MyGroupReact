{"ast":null,"code":"import _objectSpread from\"D:/MyGroupReact/frontend/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import _objectWithoutProperties from\"D:/MyGroupReact/frontend/node_modules/@babel/runtime/helpers/esm/objectWithoutProperties.js\";const _excluded=[\"children\",\"value\",\"index\"];import React,{useState,useEffect}from'react';import{Container,Typography,Grid,Card,CardContent,CardMedia,CardActions,Button,Box,Dialog,DialogTitle,DialogContent,DialogActions,TextField,FormControl,InputLabel,Select,MenuItem,Chip,IconButton,Menu,ListItemIcon,ListItemText,Fab,Avatar,Divider,Paper,Tab,Tabs}from'@mui/material';import{Add as AddIcon,MoreVert as MoreVertIcon,Edit as EditIcon,Delete as DeleteIcon,Visibility as ViewIcon,PlayArrow as PlayIcon,Share as ShareIcon,Download as DownloadIcon,Radio as RadioIcon,Tv as TvIcon,YouTube as YouTubeIcon,Language as WebIcon,Article as MagazineIcon,Description as EPaperIcon}from'@mui/icons-material';import{useAuth}from'../contexts/AuthContext';import api from'../services/api';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";function TabPanel(props){const{children,value,index}=props,other=_objectWithoutProperties(props,_excluded);return/*#__PURE__*/_jsx(\"div\",_objectSpread(_objectSpread({role:\"tabpanel\",hidden:value!==index,id:\"media-tabpanel-\".concat(index),\"aria-labelledby\":\"media-tab-\".concat(index)},other),{},{children:value===index&&/*#__PURE__*/_jsx(Box,{sx:{p:0},children:children})}));}const Media=()=>{const{user}=useAuth();const[tabValue,setTabValue]=useState(0);const[mediaItems,setMediaItems]=useState([]);const[loading,setLoading]=useState(true);const[createDialogOpen,setCreateDialogOpen]=useState(false);const[anchorEl,setAnchorEl]=useState(null);const[selectedMedia,setSelectedMedia]=useState(null);const[filterType,setFilterType]=useState('');const[newMedia,setNewMedia]=useState({title:'',description:'',media_type:'tv',media_url:'',is_public:true});const mediaTypes=[{value:'tv',label:'My TV',icon:/*#__PURE__*/_jsx(TvIcon,{}),color:'#1976d2'},{value:'radio',label:'My Radio',icon:/*#__PURE__*/_jsx(RadioIcon,{}),color:'#388e3c'},{value:'youtube',label:'YouTube',icon:/*#__PURE__*/_jsx(YouTubeIcon,{}),color:'#d32f2f'},{value:'web',label:'Web News',icon:/*#__PURE__*/_jsx(WebIcon,{}),color:'#f57c00'},{value:'magazine',label:'Magazine',icon:/*#__PURE__*/_jsx(MagazineIcon,{}),color:'#7b1fa2'},{value:'epaper',label:'E-Paper',icon:/*#__PURE__*/_jsx(EPaperIcon,{}),color:'#5d4037'}];useEffect(()=>{fetchMediaItems();},[]);const fetchMediaItems=async()=>{try{const response=await api.get('/media');setMediaItems(response.data);}catch(error){console.error('Failed to fetch media items:',error);}finally{setLoading(false);}};const handleTabChange=(event,newValue)=>{setTabValue(newValue);};const handleCreateMedia=async()=>{try{const response=await api.post('/media',newMedia);setMediaItems([response.data,...mediaItems]);setCreateDialogOpen(false);setNewMedia({title:'',description:'',media_type:'tv',media_url:'',is_public:true});}catch(error){console.error('Failed to create media:',error);}};const handleMenuClick=(event,media)=>{setAnchorEl(event.currentTarget);setSelectedMedia(media);};const handleMenuClose=()=>{setAnchorEl(null);setSelectedMedia(null);};const getMediaTypeIcon=type=>{const mediaType=mediaTypes.find(mt=>mt.value===type);return mediaType?mediaType.icon:/*#__PURE__*/_jsx(TvIcon,{});};const getMediaTypeColor=type=>{const mediaType=mediaTypes.find(mt=>mt.value===type);return mediaType?mediaType.color:'#1976d2';};const filteredMedia=mediaItems.filter(media=>{if(!filterType)return true;return media.media_type===filterType;});const renderMediaCard=media=>{var _mediaTypes$find;return/*#__PURE__*/_jsxs(Card,{sx:{height:'100%',display:'flex',flexDirection:'column'},children:[/*#__PURE__*/_jsx(CardMedia,{component:\"img\",height:\"200\",image:media.thumbnail||'/assets/default-media.png',alt:media.title,sx:{position:'relative'}}),/*#__PURE__*/_jsxs(CardContent,{sx:{flexGrow:1},children:[/*#__PURE__*/_jsxs(Box,{display:\"flex\",justifyContent:\"space-between\",alignItems:\"flex-start\",mb:1,children:[/*#__PURE__*/_jsx(Typography,{variant:\"h6\",component:\"h2\",noWrap:true,children:media.title}),/*#__PURE__*/_jsx(IconButton,{size:\"small\",onClick:e=>handleMenuClick(e,media),children:/*#__PURE__*/_jsx(MoreVertIcon,{})})]}),/*#__PURE__*/_jsxs(Box,{display:\"flex\",alignItems:\"center\",gap:1,mb:2,children:[/*#__PURE__*/_jsx(Avatar,{sx:{width:24,height:24,bgcolor:getMediaTypeColor(media.media_type),fontSize:'12px'},children:getMediaTypeIcon(media.media_type)}),/*#__PURE__*/_jsx(Chip,{label:(_mediaTypes$find=mediaTypes.find(mt=>mt.value===media.media_type))===null||_mediaTypes$find===void 0?void 0:_mediaTypes$find.label,size:\"small\",sx:{bgcolor:getMediaTypeColor(media.media_type),color:'white'}}),media.is_featured&&/*#__PURE__*/_jsx(Chip,{label:\"Featured\",size:\"small\",color:\"warning\"})]}),/*#__PURE__*/_jsx(Typography,{variant:\"body2\",color:\"textSecondary\",paragraph:true,children:media.description}),/*#__PURE__*/_jsxs(Box,{display:\"flex\",\"justify-content\":\"space-between\",alignItems:\"center\",mt:2,children:[/*#__PURE__*/_jsxs(Box,{display:\"flex\",gap:2,children:[/*#__PURE__*/_jsxs(Typography,{variant:\"caption\",color:\"textSecondary\",children:[media.views,\" views\"]}),/*#__PURE__*/_jsxs(Typography,{variant:\"caption\",color:\"textSecondary\",children:[media.likes,\" likes\"]})]}),media.duration&&/*#__PURE__*/_jsx(Typography,{variant:\"caption\",color:\"textSecondary\",children:media.duration})]})]}),/*#__PURE__*/_jsxs(CardActions,{children:[/*#__PURE__*/_jsx(Button,{size:\"small\",startIcon:/*#__PURE__*/_jsx(PlayIcon,{}),children:\"Play\"}),/*#__PURE__*/_jsx(Button,{size:\"small\",startIcon:/*#__PURE__*/_jsx(ShareIcon,{}),children:\"Share\"}),/*#__PURE__*/_jsx(Button,{size:\"small\",startIcon:/*#__PURE__*/_jsx(DownloadIcon,{}),children:\"Download\"})]})]},media.id);};return/*#__PURE__*/_jsxs(Container,{maxWidth:\"lg\",sx:{mt:4,mb:4},children:[/*#__PURE__*/_jsxs(Box,{display:\"flex\",justifyContent:\"space-between\",alignItems:\"center\",mb:4,children:[/*#__PURE__*/_jsx(Typography,{variant:\"h4\",component:\"h1\",fontWeight:\"bold\",children:\"My Media\"}),/*#__PURE__*/_jsx(Button,{variant:\"contained\",startIcon:/*#__PURE__*/_jsx(AddIcon,{}),onClick:()=>setCreateDialogOpen(true),size:\"large\",children:\"Add Media\"})]}),/*#__PURE__*/_jsx(Paper,{sx:{width:'100%',mb:3},children:/*#__PURE__*/_jsxs(Tabs,{value:tabValue,onChange:handleTabChange,\"aria-label\":\"media tabs\",children:[/*#__PURE__*/_jsx(Tab,{label:\"All Media\"}),/*#__PURE__*/_jsx(Tab,{label:\"My Content\"}),/*#__PURE__*/_jsx(Tab,{label:\"Featured\"}),/*#__PURE__*/_jsx(Tab,{label:\"Categories\"})]})}),/*#__PURE__*/_jsx(Paper,{sx:{p:2,mb:3},children:/*#__PURE__*/_jsxs(Box,{display:\"flex\",alignItems:\"center\",gap:2,flexWrap:\"wrap\",children:[/*#__PURE__*/_jsx(Typography,{variant:\"body2\",color:\"textSecondary\",children:\"Filter by type:\"}),/*#__PURE__*/_jsx(Button,{variant:!filterType?\"contained\":\"outlined\",size:\"small\",onClick:()=>setFilterType(''),children:\"All\"}),mediaTypes.map(type=>/*#__PURE__*/_jsx(Button,{variant:filterType===type.value?\"contained\":\"outlined\",size:\"small\",startIcon:type.icon,onClick:()=>setFilterType(type.value),sx:{bgcolor:filterType===type.value?type.color:'transparent',borderColor:type.color,color:filterType===type.value?'white':type.color,'&:hover':{bgcolor:type.color,color:'white'}},children:type.label},type.value))]})}),/*#__PURE__*/_jsx(TabPanel,{value:tabValue,index:0,children:/*#__PURE__*/_jsxs(Grid,{container:true,spacing:3,children:[filteredMedia.map(media=>/*#__PURE__*/_jsx(Grid,{item:true,xs:12,md:6,lg:4,children:renderMediaCard(media)},media.id)),filteredMedia.length===0&&/*#__PURE__*/_jsx(Grid,{item:true,xs:12,children:/*#__PURE__*/_jsxs(Box,{textAlign:\"center\",py:8,children:[/*#__PURE__*/_jsx(TvIcon,{sx:{fontSize:64,color:'text.secondary',mb:2}}),/*#__PURE__*/_jsx(Typography,{variant:\"h6\",color:\"textSecondary\",gutterBottom:true,children:\"No media content found\"}),/*#__PURE__*/_jsx(Typography,{variant:\"body1\",color:\"textSecondary\",mb:3,children:\"Start creating your media content to engage your audience.\"}),/*#__PURE__*/_jsx(Button,{variant:\"contained\",startIcon:/*#__PURE__*/_jsx(AddIcon,{}),onClick:()=>setCreateDialogOpen(true),children:\"Add Media Content\"})]})})]})}),/*#__PURE__*/_jsx(TabPanel,{value:tabValue,index:1,children:/*#__PURE__*/_jsx(Typography,{variant:\"h6\",gutterBottom:true,children:\"My Media Content\"})}),/*#__PURE__*/_jsx(TabPanel,{value:tabValue,index:2,children:/*#__PURE__*/_jsx(Typography,{variant:\"h6\",gutterBottom:true,children:\"Featured Content\"})}),/*#__PURE__*/_jsx(TabPanel,{value:tabValue,index:3,children:/*#__PURE__*/_jsx(Typography,{variant:\"h6\",gutterBottom:true,children:\"Media Categories\"})}),/*#__PURE__*/_jsxs(Dialog,{open:createDialogOpen,onClose:()=>setCreateDialogOpen(false),maxWidth:\"md\",fullWidth:true,children:[/*#__PURE__*/_jsx(DialogTitle,{children:\"Add New Media Content\"}),/*#__PURE__*/_jsx(DialogContent,{children:/*#__PURE__*/_jsxs(Grid,{container:true,spacing:2,sx:{mt:1},children:[/*#__PURE__*/_jsx(Grid,{item:true,xs:12,children:/*#__PURE__*/_jsx(TextField,{fullWidth:true,label:\"Title\",value:newMedia.title,onChange:e=>setNewMedia(_objectSpread(_objectSpread({},newMedia),{},{title:e.target.value})),required:true})}),/*#__PURE__*/_jsx(Grid,{item:true,xs:12,sm:6,children:/*#__PURE__*/_jsxs(FormControl,{fullWidth:true,children:[/*#__PURE__*/_jsx(InputLabel,{children:\"Media Type\"}),/*#__PURE__*/_jsx(Select,{value:newMedia.media_type,onChange:e=>setNewMedia(_objectSpread(_objectSpread({},newMedia),{},{media_type:e.target.value})),label:\"Media Type\",required:true,children:mediaTypes.map(type=>/*#__PURE__*/_jsx(MenuItem,{value:type.value,children:/*#__PURE__*/_jsxs(Box,{display:\"flex\",alignItems:\"center\",gap:1,children:[type.icon,type.label]})},type.value))})]})}),/*#__PURE__*/_jsx(Grid,{item:true,xs:12,sm:6,children:/*#__PURE__*/_jsx(TextField,{fullWidth:true,label:\"Media URL\",value:newMedia.media_url,onChange:e=>setNewMedia(_objectSpread(_objectSpread({},newMedia),{},{media_url:e.target.value})),placeholder:\"https://...\",required:true})}),/*#__PURE__*/_jsx(Grid,{item:true,xs:12,children:/*#__PURE__*/_jsx(TextField,{fullWidth:true,label:\"Description\",value:newMedia.description,onChange:e=>setNewMedia(_objectSpread(_objectSpread({},newMedia),{},{description:e.target.value})),multiline:true,rows:3})}),/*#__PURE__*/_jsx(Grid,{item:true,xs:12,children:/*#__PURE__*/_jsxs(FormControl,{fullWidth:true,children:[/*#__PURE__*/_jsx(InputLabel,{children:\"Visibility\"}),/*#__PURE__*/_jsxs(Select,{value:newMedia.is_public?'public':'private',onChange:e=>setNewMedia(_objectSpread(_objectSpread({},newMedia),{},{is_public:e.target.value==='public'})),label:\"Visibility\",children:[/*#__PURE__*/_jsx(MenuItem,{value:\"public\",children:\"Public\"}),/*#__PURE__*/_jsx(MenuItem,{value:\"private\",children:\"Private\"})]})]})})]})}),/*#__PURE__*/_jsxs(DialogActions,{children:[/*#__PURE__*/_jsx(Button,{onClick:()=>setCreateDialogOpen(false),children:\"Cancel\"}),/*#__PURE__*/_jsx(Button,{onClick:handleCreateMedia,variant:\"contained\",disabled:!newMedia.title||!newMedia.media_url||!newMedia.media_type,children:\"Add Media\"})]})]}),/*#__PURE__*/_jsxs(Menu,{anchorEl:anchorEl,open:Boolean(anchorEl),onClose:handleMenuClose,children:[/*#__PURE__*/_jsxs(MenuItem,{onClick:handleMenuClose,children:[/*#__PURE__*/_jsx(ListItemIcon,{children:/*#__PURE__*/_jsx(ViewIcon,{fontSize:\"small\"})}),/*#__PURE__*/_jsx(ListItemText,{children:\"View Details\"})]}),/*#__PURE__*/_jsxs(MenuItem,{onClick:handleMenuClose,children:[/*#__PURE__*/_jsx(ListItemIcon,{children:/*#__PURE__*/_jsx(EditIcon,{fontSize:\"small\"})}),/*#__PURE__*/_jsx(ListItemText,{children:\"Edit Content\"})]}),/*#__PURE__*/_jsxs(MenuItem,{onClick:handleMenuClose,children:[/*#__PURE__*/_jsx(ListItemIcon,{children:/*#__PURE__*/_jsx(ShareIcon,{fontSize:\"small\"})}),/*#__PURE__*/_jsx(ListItemText,{children:\"Share\"})]}),/*#__PURE__*/_jsx(Divider,{}),/*#__PURE__*/_jsxs(MenuItem,{onClick:handleMenuClose,sx:{color:'error.main'},children:[/*#__PURE__*/_jsx(ListItemIcon,{children:/*#__PURE__*/_jsx(DeleteIcon,{fontSize:\"small\",color:\"error\"})}),/*#__PURE__*/_jsx(ListItemText,{children:\"Delete\"})]})]}),/*#__PURE__*/_jsx(Fab,{color:\"primary\",\"aria-label\":\"add\",sx:{position:'fixed',bottom:16,right:16,display:{xs:'flex',md:'none'}},onClick:()=>setCreateDialogOpen(true),children:/*#__PURE__*/_jsx(AddIcon,{})})]});};export default Media;","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}