"use strict";(self.webpackChunkmygroup_frontend=self.webpackChunkmygroup_frontend||[]).push([[669],{7669:(e,n,t)=>{t.r(n),t.d(n,{default:()=>z});var s=t(9950),a=t(6491),r=t(2053),l=t(899),i=t(470),c=t(704),d=t(2235),o=t(9925),h=t(5979),x=t(3788),A=t(6101),u=t(3266),j=t(226),m=t(1320),v=t(5769),y=t(9780),g=t(9213),f=t(1671),p=t(4075),C=t(5277),S=t(5333),b=t(3464),_=t(33),w=t(8170),L=t(9739),k=t(5471),W=t(4414);const E=(0,k.A)((0,W.jsx)("path",{d:"m20.5 3-.16.03L15 5.1 9 3 3.36 4.9c-.21.07-.36.25-.36.48V20.5c0 .28.22.5.5.5l.16-.03L9 18.9l6 2.1 5.64-1.9c.21-.07.36-.25.36-.48V3.5c0-.28-.22-.5-.5-.5M15 19l-6-2.11V5l6 2.11z"}),"Map");var I=t(9715),V=t(3256),N=t(379),D=t(4271),M=t(2715);const z=()=>{const{data:e,loading:n,refetch:t}=(0,D.g)(()=>M.Ay.get("/admin/states",{params:"all"!==B?{countryId:B}:{}})),[k,z]=(0,s.useState)([]),[P,T]=(0,s.useState)([]),[U,q]=(0,s.useState)(""),[B,F]=(0,s.useState)("all"),[G,H]=(0,s.useState)(!1),[J,K]=(0,s.useState)(null);(0,s.useEffect)(()=>{(async()=>{try{const e=await M.Ay.get("/admin/countries");e.data&&T(e.data.countries||[])}catch(e){console.error("Error fetching countries:",e)}})()},[]),(0,s.useEffect)(()=>{(async()=>{try{await t(),e&&(z(e.states||[]),T(e.countries||[]))}catch(n){console.error("Error fetching states:",n)}})()},[B]);const O=k.filter(e=>{var n;return e.state_name.toLowerCase().includes(U.toLowerCase())||(null===(n=e.Country)||void 0===n?void 0:n.country_name.toLowerCase().includes(U.toLowerCase()))}),Q=()=>{H(!1),K(null)};return(0,W.jsxs)(a.A,{sx:{p:3},children:[(0,W.jsxs)(r.A,{variant:"h4",sx:{mb:3,display:"flex",alignItems:"center"},children:[(0,W.jsx)(E,{sx:{mr:2}}),"States Management"]}),(0,W.jsxs)(l.Ay,{container:!0,spacing:3,sx:{mb:3},children:[(0,W.jsx)(l.Ay,{item:!0,xs:12,md:3,children:(0,W.jsx)(i.A,{children:(0,W.jsxs)(c.A,{children:[(0,W.jsx)(r.A,{variant:"h6",color:"primary",children:"Total States"}),(0,W.jsx)(r.A,{variant:"h4",children:k.length})]})})}),(0,W.jsx)(l.Ay,{item:!0,xs:12,md:3,children:(0,W.jsx)(i.A,{children:(0,W.jsxs)(c.A,{children:[(0,W.jsx)(r.A,{variant:"h6",color:"success.main",children:"Active States"}),(0,W.jsx)(r.A,{variant:"h4",children:k.filter(e=>"active"===e.status).length})]})})})]}),(0,W.jsx)(d.A,{sx:{p:2,mb:3},children:(0,W.jsxs)(l.Ay,{container:!0,spacing:2,alignItems:"center",children:[(0,W.jsx)(l.Ay,{item:!0,xs:12,md:4,children:(0,W.jsx)(o.A,{fullWidth:!0,placeholder:"Search states...",value:U,onChange:e=>q(e.target.value),InputProps:{startAdornment:(0,W.jsx)(I.A,{sx:{color:"action.active",mr:1}})}})}),(0,W.jsx)(l.Ay,{item:!0,xs:12,md:3,children:(0,W.jsxs)(h.A,{fullWidth:!0,children:[(0,W.jsx)(x.A,{children:"Country"}),(0,W.jsxs)(A.A,{value:B,onChange:e=>F(e.target.value),label:"Country",children:[(0,W.jsx)(u.A,{value:"all",children:"All Countries"}),P.map(e=>(0,W.jsx)(u.A,{value:e.id,children:e.country_name},e.id))]})]})}),(0,W.jsx)(l.Ay,{item:!0,xs:12,md:3,children:(0,W.jsx)(j.A,{fullWidth:!0,variant:"contained",startIcon:(0,W.jsx)(V.A,{}),onClick:()=>H(!0),children:"Add State"})})]})}),(0,W.jsx)(m.A,{component:d.A,children:(0,W.jsxs)(v.A,{children:[(0,W.jsx)(y.A,{children:(0,W.jsxs)(g.A,{children:[(0,W.jsx)(f.A,{children:"State Name"}),(0,W.jsx)(f.A,{children:"Country"}),(0,W.jsx)(f.A,{children:"Status"}),(0,W.jsx)(f.A,{children:"Created Date"}),(0,W.jsx)(f.A,{children:"Actions"})]})}),(0,W.jsx)(p.A,{children:n?(0,W.jsx)(g.A,{children:(0,W.jsx)(f.A,{colSpan:5,align:"center",children:"Loading..."})}):0===O.length?(0,W.jsx)(g.A,{children:(0,W.jsx)(f.A,{colSpan:5,align:"center",children:"No states found"})}):O.map(e=>{var n;return(0,W.jsxs)(g.A,{hover:!0,children:[(0,W.jsx)(f.A,{children:(0,W.jsx)(r.A,{variant:"subtitle2",children:e.state_name})}),(0,W.jsx)(f.A,{children:(0,W.jsx)(r.A,{variant:"body2",children:(null===(n=e.Country)||void 0===n?void 0:n.country_name)||"N/A"})}),(0,W.jsx)(f.A,{children:(0,W.jsx)(C.A,{label:e.status,color:"active"===e.status?"success":"default",size:"small"})}),(0,W.jsx)(f.A,{children:(0,W.jsx)(r.A,{variant:"body2",children:new Date(e.created_date).toLocaleDateString()})}),(0,W.jsx)(f.A,{children:(0,W.jsx)(S.A,{onClick:()=>(e=>{K(e),H(!0)})(e),children:(0,W.jsx)(N.A,{})})})]},e.id)})})]})}),(0,W.jsxs)(b.A,{open:G,onClose:Q,maxWidth:"sm",fullWidth:!0,children:[(0,W.jsx)(_.A,{children:J?"Edit State":"Add State"}),(0,W.jsxs)(w.A,{children:[(0,W.jsx)(o.A,{fullWidth:!0,label:"State Name",margin:"normal",defaultValue:(null===J||void 0===J?void 0:J.state_name)||""}),(0,W.jsxs)(h.A,{fullWidth:!0,margin:"normal",children:[(0,W.jsx)(x.A,{children:"Country"}),(0,W.jsx)(A.A,{defaultValue:(null===J||void 0===J?void 0:J.country_id)||"",label:"Country",children:P.map(e=>(0,W.jsx)(u.A,{value:e.id,children:e.country_name},e.id))})]})]}),(0,W.jsxs)(L.A,{children:[(0,W.jsx)(j.A,{onClick:Q,children:"Cancel"}),(0,W.jsx)(j.A,{variant:"contained",children:J?"Update":"Add"})]})]})]})}}}]);