"use strict";(self.webpackChunkmygroup_frontend=self.webpackChunkmygroup_frontend||[]).push([[188],{5188:(e,s,n)=>{n.r(s),n.d(s,{default:()=>z});var r=n(9950),i=n(6491),a=n(2053),l=n(899),t=n(470),c=n(704),d=n(2235),o=n(9925),x=n(5979),h=n(3788),A=n(6101),j=n(3266),u=n(226),v=n(1320),g=n(5769),m=n(9780),p=n(9213),y=n(1671),f=n(4075),S=n(5277),b=n(1413),C=n(1434),_=n(8321),w=n(3364),P=n(421),I=n(294),k=n(9715),E=n(4271),F=n(2715),W=n(4414);const z=()=>{const{data:e,loading:s,refetch:n}=(0,E.g)(()=>F.Ay.get("/admin/needy",{params:{page:L+1,limit:O,search:T,category:G,status:J}})),[z,D]=(0,r.useState)([]),[L,M]=(0,r.useState)(0),[O,N]=(0,r.useState)(10),[R,q]=(0,r.useState)(0),[T,B]=(0,r.useState)(""),[G,H]=(0,r.useState)("all"),[J,K]=(0,r.useState)("all");(0,r.useEffect)(()=>{(async()=>{try{var s;await n(),e&&(D(e.services||[]),q("number"===typeof e.total?e.total:(null===(s=e.pagination)||void 0===s?void 0:s.total)||0))}catch(r){console.error("Error fetching needy services:",r)}})()},[L,O,T,G,J]);const Q=e=>{switch(e){case"active":return"success";case"inactive":return"error";case"pending":return"warning";default:return"default"}};return(0,W.jsxs)(i.A,{sx:{p:3},children:[(0,W.jsxs)(a.A,{variant:"h4",sx:{mb:3,display:"flex",alignItems:"center"},children:[(0,W.jsx)(w.A,{sx:{mr:2}}),"Needy Services Management"]}),(0,W.jsx)(l.Ay,{container:!0,spacing:3,sx:{mb:3},children:(0,W.jsx)(l.Ay,{item:!0,xs:12,md:3,children:(0,W.jsx)(t.A,{children:(0,W.jsxs)(c.A,{children:[(0,W.jsx)(a.A,{variant:"h6",color:"primary",children:"Total Services"}),(0,W.jsx)(a.A,{variant:"h4",children:R})]})})})}),(0,W.jsx)(d.A,{sx:{p:2,mb:3},children:(0,W.jsxs)(l.Ay,{container:!0,spacing:2,alignItems:"center",children:[(0,W.jsx)(l.Ay,{item:!0,xs:12,md:4,children:(0,W.jsx)(o.A,{fullWidth:!0,placeholder:"Search services...",value:T,onChange:e=>B(e.target.value),InputProps:{startAdornment:(0,W.jsx)(k.A,{sx:{color:"action.active",mr:1}})}})}),(0,W.jsx)(l.Ay,{item:!0,xs:12,md:3,children:(0,W.jsxs)(x.A,{fullWidth:!0,children:[(0,W.jsx)(h.A,{children:"Category"}),(0,W.jsxs)(A.A,{value:G,onChange:e=>H(e.target.value),label:"Category",children:[(0,W.jsx)(j.A,{value:"all",children:"All Categories"}),(0,W.jsx)(j.A,{value:"Medical",children:"Medical"}),(0,W.jsx)(j.A,{value:"Education",children:"Education"}),(0,W.jsx)(j.A,{value:"Financial",children:"Financial"}),(0,W.jsx)(j.A,{value:"Food",children:"Food"}),(0,W.jsx)(j.A,{value:"Other",children:"Other"})]})]})}),(0,W.jsx)(l.Ay,{item:!0,xs:12,md:3,children:(0,W.jsxs)(x.A,{fullWidth:!0,children:[(0,W.jsx)(h.A,{children:"Status"}),(0,W.jsxs)(A.A,{value:J,onChange:e=>K(e.target.value),label:"Status",children:[(0,W.jsx)(j.A,{value:"all",children:"All Status"}),(0,W.jsx)(j.A,{value:"active",children:"Active"}),(0,W.jsx)(j.A,{value:"pending",children:"Pending"}),(0,W.jsx)(j.A,{value:"inactive",children:"Inactive"})]})]})}),(0,W.jsx)(l.Ay,{item:!0,xs:12,md:2,children:(0,W.jsx)(u.A,{fullWidth:!0,variant:"outlined",startIcon:(0,W.jsx)(_.A,{}),onClick:()=>{B(""),H("all"),K("all")},children:"Clear"})})]})}),(0,W.jsxs)(v.A,{component:d.A,children:[(0,W.jsxs)(g.A,{children:[(0,W.jsx)(m.A,{children:(0,W.jsxs)(p.A,{children:[(0,W.jsx)(y.A,{children:"Service"}),(0,W.jsx)(y.A,{children:"Category"}),(0,W.jsx)(y.A,{children:"Requester"}),(0,W.jsx)(y.A,{children:"Location"}),(0,W.jsx)(y.A,{children:"Status"}),(0,W.jsx)(y.A,{children:"Created Date"})]})}),(0,W.jsx)(f.A,{children:s?(0,W.jsx)(p.A,{children:(0,W.jsx)(y.A,{colSpan:6,align:"center",children:"Loading..."})}):0===z.length?(0,W.jsx)(p.A,{children:(0,W.jsx)(y.A,{colSpan:6,align:"center",children:"No services found"})}):z.map(e=>{var s,n,r,l;return(0,W.jsxs)(p.A,{hover:!0,children:[(0,W.jsx)(y.A,{children:(0,W.jsxs)(i.A,{children:[(0,W.jsx)(a.A,{variant:"subtitle2",sx:{mb:.5},children:e.service_title}),(0,W.jsx)(a.A,{variant:"caption",color:"text.secondary",children:(null===(s=e.service_description)||void 0===s?void 0:s.length)>100?"".concat(e.service_description.substring(0,100),"..."):e.service_description})]})}),(0,W.jsx)(y.A,{children:(0,W.jsx)(S.A,{label:e.service_category,size:"small",variant:"outlined"})}),(0,W.jsx)(y.A,{children:(0,W.jsxs)(i.A,{sx:{display:"flex",alignItems:"center"},children:[(0,W.jsx)(b.A,{sx:{mr:2,bgcolor:"secondary.main"},children:(0,W.jsx)(I.A,{})}),e.user&&(0,W.jsxs)(i.A,{children:[(0,W.jsxs)(a.A,{variant:"body2",children:[e.user.first_name," ",e.user.last_name]}),(0,W.jsx)(a.A,{variant:"caption",color:"text.secondary",children:e.user.email})]})]})}),(0,W.jsx)(y.A,{children:(0,W.jsxs)(i.A,{sx:{display:"flex",alignItems:"center"},children:[(0,W.jsx)(P.A,{fontSize:"small",sx:{mr:.5,color:"text.secondary"}}),(0,W.jsxs)(i.A,{children:[(0,W.jsx)(a.A,{variant:"caption",display:"block",children:null===(n=e.country)||void 0===n?void 0:n.country_name}),(0,W.jsxs)(a.A,{variant:"caption",color:"text.secondary",children:[null===(r=e.state)||void 0===r?void 0:r.state_name,", ",null===(l=e.district)||void 0===l?void 0:l.district_name]})]})]})}),(0,W.jsx)(y.A,{children:(0,W.jsx)(S.A,{label:e.status,color:Q(e.status),size:"small"})}),(0,W.jsx)(y.A,{children:(0,W.jsx)(a.A,{variant:"body2",children:new Date(e.created_date).toLocaleDateString()})})]},e.id)})})]}),(0,W.jsx)(C.A,{rowsPerPageOptions:[5,10,25],component:"div",count:R,rowsPerPage:O,page:L,onPageChange:(e,s)=>{M(s)},onRowsPerPageChange:e=>{N(parseInt(e.target.value,10)),M(0)}})]})]})}}}]);