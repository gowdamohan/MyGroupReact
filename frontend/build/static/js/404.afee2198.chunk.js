"use strict";(self.webpackChunkmygroup_frontend=self.webpackChunkmygroup_frontend||[]).push([[404],{2404:(e,t,s)=>{s.r(t),s.d(t,{default:()=>z});var n=s(9950),i=s(6491),a=s(2053),l=s(899),r=s(470),d=s(704),c=s(2235),o=s(9925),h=s(5979),x=s(3788),A=s(6101),u=s(3266),j=s(226),m=s(1320),v=s(5769),y=s(9780),g=s(9213),f=s(1671),p=s(4075),C=s(5277),S=s(5333),b=s(3464),_=s(33),w=s(8170),D=s(9739),I=s(3256),W=s(379),L=s(421),k=s(9715),E=s(4271),N=s(2715),V=s(4414);const z=()=>{const{data:e,loading:t,refetch:s}=(0,E.g)(()=>N.Ay.get("/admin/districts",{params:{countryId:"all"!==G?G:void 0,stateId:"all"!==J?J:void 0,search:B||void 0}})),[z,M]=(0,n.useState)([]),[P,T]=(0,n.useState)([]),[U,q]=(0,n.useState)([]),[B,F]=(0,n.useState)(""),[G,H]=(0,n.useState)("all"),[J,K]=(0,n.useState)("all"),[O,Q]=(0,n.useState)(!1),[R,X]=(0,n.useState)(null),[Y,Z]=(0,n.useState)(""),$=async e=>{try{const t=await N.Ay.get("/admin/states",{params:e?{countryId:e}:{}});t.data&&q(t.data.states||[])}catch(t){console.error("Error fetching states:",t)}};(0,n.useEffect)(()=>{(async()=>{try{const e=await N.Ay.get("/admin/countries");e.data&&T(e.data.countries||[])}catch(e){console.error("Error fetching countries:",e)}})(),$()},[]),(0,n.useEffect)(()=>{(async()=>{try{const t={};"all"!==G&&(t.countryId=G),"all"!==J&&(t.stateId=J),await s(),e&&M(e.districts||[])}catch(t){console.error("Error fetching districts:",t)}})()},[G,J]),(0,n.useEffect)(()=>{"all"!==G&&($(G),K("all"))},[G]);const ee=z.filter(e=>{var t,s;return e.district_name.toLowerCase().includes(B.toLowerCase())||(null===(t=e.State)||void 0===t?void 0:t.state_name.toLowerCase().includes(B.toLowerCase()))||(null===(s=e.Country)||void 0===s?void 0:s.country_name.toLowerCase().includes(B.toLowerCase()))}),te=()=>{Q(!1),X(null),Z("")};return(0,V.jsxs)(i.A,{sx:{p:3},children:[(0,V.jsxs)(a.A,{variant:"h4",sx:{mb:3,display:"flex",alignItems:"center"},children:[(0,V.jsx)(L.A,{sx:{mr:2}}),"Districts Management"]}),(0,V.jsxs)(l.Ay,{container:!0,spacing:3,sx:{mb:3},children:[(0,V.jsx)(l.Ay,{item:!0,xs:12,md:3,children:(0,V.jsx)(r.A,{children:(0,V.jsxs)(d.A,{children:[(0,V.jsx)(a.A,{variant:"h6",color:"primary",children:"Total Districts"}),(0,V.jsx)(a.A,{variant:"h4",children:z.length})]})})}),(0,V.jsx)(l.Ay,{item:!0,xs:12,md:3,children:(0,V.jsx)(r.A,{children:(0,V.jsxs)(d.A,{children:[(0,V.jsx)(a.A,{variant:"h6",color:"success.main",children:"Active Districts"}),(0,V.jsx)(a.A,{variant:"h4",children:z.filter(e=>"active"===e.status).length})]})})})]}),(0,V.jsx)(c.A,{sx:{p:2,mb:3},children:(0,V.jsxs)(l.Ay,{container:!0,spacing:2,alignItems:"center",children:[(0,V.jsx)(l.Ay,{item:!0,xs:12,md:3,children:(0,V.jsx)(o.A,{fullWidth:!0,placeholder:"Search districts...",value:B,onChange:e=>F(e.target.value),InputProps:{startAdornment:(0,V.jsx)(k.A,{sx:{color:"action.active",mr:1}})}})}),(0,V.jsx)(l.Ay,{item:!0,xs:12,md:3,children:(0,V.jsxs)(h.A,{fullWidth:!0,children:[(0,V.jsx)(x.A,{children:"Country"}),(0,V.jsxs)(A.A,{value:G,onChange:e=>H(e.target.value),label:"Country",children:[(0,V.jsx)(u.A,{value:"all",children:"All Countries"}),P.map(e=>(0,V.jsx)(u.A,{value:e.id,children:e.country_name},e.id))]})]})}),(0,V.jsx)(l.Ay,{item:!0,xs:12,md:3,children:(0,V.jsxs)(h.A,{fullWidth:!0,children:[(0,V.jsx)(x.A,{children:"State"}),(0,V.jsxs)(A.A,{value:J,onChange:e=>K(e.target.value),label:"State",disabled:"all"===G,children:[(0,V.jsx)(u.A,{value:"all",children:"All States"}),U.map(e=>(0,V.jsx)(u.A,{value:e.id,children:e.state_name},e.id))]})]})}),(0,V.jsx)(l.Ay,{item:!0,xs:12,md:3,children:(0,V.jsx)(j.A,{fullWidth:!0,variant:"contained",startIcon:(0,V.jsx)(I.A,{}),onClick:()=>Q(!0),children:"Add District"})})]})}),(0,V.jsx)(m.A,{component:c.A,children:(0,V.jsxs)(v.A,{children:[(0,V.jsx)(y.A,{children:(0,V.jsxs)(g.A,{children:[(0,V.jsx)(f.A,{children:"District Name"}),(0,V.jsx)(f.A,{children:"State"}),(0,V.jsx)(f.A,{children:"Country"}),(0,V.jsx)(f.A,{children:"Status"}),(0,V.jsx)(f.A,{children:"Created Date"}),(0,V.jsx)(f.A,{children:"Actions"})]})}),(0,V.jsx)(p.A,{children:t?(0,V.jsx)(g.A,{children:(0,V.jsx)(f.A,{colSpan:6,align:"center",children:"Loading..."})}):0===ee.length?(0,V.jsx)(g.A,{children:(0,V.jsx)(f.A,{colSpan:6,align:"center",children:"No districts found"})}):ee.map(e=>{var t,s;return(0,V.jsxs)(g.A,{hover:!0,children:[(0,V.jsx)(f.A,{children:(0,V.jsx)(a.A,{variant:"subtitle2",children:e.district_name})}),(0,V.jsx)(f.A,{children:(0,V.jsx)(a.A,{variant:"body2",children:(null===(t=e.State)||void 0===t?void 0:t.state_name)||"N/A"})}),(0,V.jsx)(f.A,{children:(0,V.jsx)(a.A,{variant:"body2",children:(null===(s=e.Country)||void 0===s?void 0:s.country_name)||"N/A"})}),(0,V.jsx)(f.A,{children:(0,V.jsx)(C.A,{label:e.status,color:"active"===e.status?"success":"default",size:"small"})}),(0,V.jsx)(f.A,{children:(0,V.jsx)(a.A,{variant:"body2",children:new Date(e.created_date).toLocaleDateString()})}),(0,V.jsx)(f.A,{children:(0,V.jsx)(S.A,{onClick:()=>(e=>{X(e),Z(e.country_id.toString()),Q(!0)})(e),children:(0,V.jsx)(W.A,{})})})]},e.id)})})]})}),(0,V.jsxs)(b.A,{open:O,onClose:te,maxWidth:"sm",fullWidth:!0,children:[(0,V.jsx)(_.A,{children:R?"Edit District":"Add District"}),(0,V.jsxs)(w.A,{children:[(0,V.jsx)(o.A,{fullWidth:!0,label:"District Name",margin:"normal",defaultValue:(null===R||void 0===R?void 0:R.district_name)||""}),(0,V.jsxs)(h.A,{fullWidth:!0,margin:"normal",children:[(0,V.jsx)(x.A,{children:"Country"}),(0,V.jsx)(A.A,{value:Y,onChange:e=>{Z(e.target.value),$(e.target.value)},label:"Country",children:P.map(e=>(0,V.jsx)(u.A,{value:e.id,children:e.country_name},e.id))})]}),(0,V.jsxs)(h.A,{fullWidth:!0,margin:"normal",children:[(0,V.jsx)(x.A,{children:"State"}),(0,V.jsx)(A.A,{defaultValue:(null===R||void 0===R?void 0:R.state_id)||"",label:"State",disabled:!Y,children:U.filter(e=>!Y||e.country_id.toString()===Y).map(e=>(0,V.jsx)(u.A,{value:e.id,children:e.state_name},e.id))})]})]}),(0,V.jsxs)(D.A,{children:[(0,V.jsx)(j.A,{onClick:te,children:"Cancel"}),(0,V.jsx)(j.A,{variant:"contained",children:R?"Update":"Add"})]})]})]})}}}]);